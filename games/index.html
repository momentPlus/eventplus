<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Event Plus - ÿ™ÿ≠ÿØŸä ÿßŸÑŸÖŸáÿ±ÿ¨ÿßŸÜ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');

        body { 
            touch-action: none; 
            overflow: hidden; 
            user-select: none; 
            -webkit-user-select: none; 
            font-family: 'Tajawal', sans-serif;
            background-color: #000;
        }
        
        /* Animations & Effects */
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .animate-float { animation: float 3s ease-in-out infinite; }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .animate-shake { animation: shake 0.3s ease-in-out; }

        @keyframes slideDown { 
            from { transform: translateY(-100%); opacity: 0; } 
            to { transform: translateY(0); opacity: 1; } 
        }
        .animate-slideDown { animation: slideDown 0.3s ease-out forwards; }

        .crt-scanline {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 50;
            position: absolute;
            inset: 0;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Game Specific Styles */
        .tap-zone { -webkit-tap-highlight-color: transparent; }

        .volume-slider {
            -webkit-appearance: none;
            height: 4px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            outline: none;
        }
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #a855f7;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(168, 85, 247, 0.5);
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.2s ease-out forwards; }
    </style>
</head>
<body class="bg-black text-white h-screen w-screen overflow-hidden">

    <div id="root" class="h-full w-full"></div>

    <audio id="bgAudio" loop>
        <source src="sound/1.mp3" type="audio/mpeg">
    </audio>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;

        // --- ICONS WRAPPER ---
        const Icon = ({ name, size = 24, className, ...props }) => {
            if (!window.lucide || !window.lucide.icons) return null;
            const iconData = window.lucide.icons[name];
            if (!iconData) return null;
            
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                    {iconData.map((child, idx) => React.createElement(child[0], { key: idx, ...child[1] }))}
                </svg>
            );
        };

        // --- CONFIGURATION ---
        const THEME = {
            bg: "bg-slate-900",
            gradient: "bg-gradient-to-br from-[#1a0b2e] via-[#2e1065] to-[#000000]",
            primary: "bg-purple-600",
            border: "border-purple-500/30",
        };

        // --- DIFFICULTY CONFIGURATION ---
        const DIFFICULTY_CONFIG = {
            EASY: { 
                id: 'EASY', 
                label: 'ŸÖÿ®ÿ™ÿØÿ¶', 
                multiplier: 1, 
                timeFactor: 1.0, 
                speedFactor: 1.0, 
                color: 'text-green-400', 
                border: 'border-green-400', 
                mathRange: 10, // Max number for math
                quizPoints: 1000 
            },
            MEDIUM: { 
                id: 'MEDIUM', 
                label: 'ŸÖÿ≠ÿ™ÿ±ŸÅ', 
                multiplier: 1.5, 
                timeFactor: 0.66, 
                speedFactor: 1.5, 
                color: 'text-yellow-400', 
                border: 'border-yellow-400', 
                mathRange: 50,
                quizPoints: 2000 
            },
            HARD: { 
                id: 'HARD', 
                label: 'ÿ£ÿ≥ÿ∑Ÿàÿ±Ÿä', 
                multiplier: 2, 
                timeFactor: 0.5, 
                speedFactor: 2.0, 
                color: 'text-red-500', 
                border: 'border-red-500', 
                mathRange: 99,
                quizPoints: 3000 
            }
        };

        // --- GAMES LIST (UPDATED: Removed Sniper, Added Math) ---
        const GAMES_LIST = [
            { id: 'REFLEX', name: 'ÿ±ÿØ ÿßŸÑŸÅÿπŸÑ', icon: 'MousePointer2', desc: 'ÿ™ÿ¨ŸÜÿ® ÿßŸÑŸÇŸÜÿßÿ®ŸÑ!', color: 'from-red-500 to-rose-700', hasLives: true },
            { id: 'MATH', name: 'ÿ™ÿ≠ÿØŸä ÿßŸÑÿ≠ÿ≥ÿßÿ®', icon: 'Calculator', desc: 'ÿßÿ¨ŸÖÿπ Ÿàÿßÿ∑ÿ±ÿ≠ ÿ®ÿ≥ÿ±ÿπÿ©', color: 'from-cyan-500 to-blue-700', hasLives: true },
            { id: 'COLOR', name: 'ÿÆÿØÿßÿπ ÿßŸÑÿ£ŸÑŸàÿßŸÜ', icon: 'Palette', desc: 'ŸÉŸÑŸÖÿ© ÿ£ŸÖ ŸÑŸàŸÜÿü', color: 'from-pink-500 to-fuchsia-700', hasLives: true },
            { id: 'QUIZ', name: 'ÿ´ŸÇÿßŸÅÿ© ÿπŸÖÿßŸÜ', icon: 'Brain', desc: 'ÿ£ÿ≥ÿ¶ŸÑÿ© ÿπÿßŸÖÿ©', color: 'from-blue-600 to-indigo-800', hasLives: true },
        ];

        // --- QUESTIONS DATABASE ---
        const QUESTIONS_DB = {
            EASY: [
                {q: "ŸáŸäÿ¥ ŸáŸä ÿπÿßÿµŸÖÿ© ÿßŸÑÿ≥ŸÑÿ∑ŸÜÿ©ÿü", a: ["ŸÖÿ≥ŸÇÿ∑", "ÿµŸÑÿßŸÑÿ©", "ÿµÿ≠ÿßÿ±"], c: "ŸÖÿ≥ŸÇÿ∑"},
                {q: "ŸàŸäÿ¥ ÿßŸÑÿπŸÖŸÑÿ© ÿßŸÑŸÑŸä ŸÜÿ≥ÿ™ÿÆÿØŸÖŸáÿß ŸÅŸä ÿπŸÖÿßŸÜÿü", a: ["ÿßŸÑÿ±ŸäÿßŸÑ ÿßŸÑÿπŸÖÿßŸÜŸä", "ÿßŸÑÿØŸäŸÜÿßÿ±", "ÿßŸÑÿØÿ±ŸáŸÖ"], c: "ÿßŸÑÿ±ŸäÿßŸÑ ÿßŸÑÿπŸÖÿßŸÜŸä"},
                {q: "ŸÖŸÜŸáŸà ÿßŸÑÿ≥ŸÑÿ∑ÿßŸÜ ÿßŸÑÿ≠ÿßŸÑŸä ÿßŸÑŸÑŸá Ÿäÿ≠ŸÅÿ∏Ÿáÿü", a: ["ŸáŸäÿ´ŸÖ ÿ®ŸÜ ÿ∑ÿßÿ±ŸÇ", "ŸÇÿßÿ®Ÿàÿ≥ ÿ®ŸÜ ÿ≥ÿπŸäÿØ", "ÿ≥ÿπŸäÿØ ÿ®ŸÜ ÿ™ŸäŸÖŸàÿ±"], c: "ŸáŸäÿ´ŸÖ ÿ®ŸÜ ÿ∑ÿßÿ±ŸÇ"},
                {q: "ÿßŸÑÿÆŸÜÿ¨ÿ± ŸÅŸä ÿßŸÑÿπŸÑŸÖ ŸÑŸàŸÜŸá ŸáŸäÿ¥ÿü", a: ["ÿ£ÿ®Ÿäÿ∂", "ÿ£ÿ≠ŸÖÿ±", "ÿ£ÿÆÿ∂ÿ±"], c: "ÿ£ÿ®Ÿäÿ∂"},
                {q: "ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑŸÑŸä Ÿäÿ≤ÿ±ÿπŸàŸÜ ŸÅŸäŸá ÿ±ŸÖÿßŸÜ ŸàŸàÿ±ÿØ? ", a: ["ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ±", "ÿ¥ŸÖÿ≥", "ÿßŸÑŸÉŸàÿ±"], c: "ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ±"},
                {q: "ŸáŸäÿ¥ ÿ£ÿ¥Ÿáÿ± ÿ≠ŸÑŸàŸâ ŸÜŸÇÿØŸÖŸáÿß ŸÑŸÑÿ∂ŸäŸÅÿü", a: ["ÿßŸÑÿ≠ŸÑŸàŸâ ÿßŸÑÿπŸÖÿßŸÜŸäÿ©", "ÿßŸÑÿ®ŸÇŸÑÿßŸàÿ©", "ÿßŸÑŸÉŸÜÿßŸÅÿ©"], c: "ÿßŸÑÿ≠ŸÑŸàŸâ ÿßŸÑÿπŸÖÿßŸÜŸäÿ©"},
                {q: "ŸàŸäŸÜ ŸäÿµŸäÿ± ŸÖŸáÿ±ÿ¨ÿßŸÜ ÿßŸÑÿÆÿ±ŸäŸÅÿü", a: ["ÿµŸÑÿßŸÑÿ©", "ÿµŸàÿ±", "ŸÜÿ≤ŸàŸâ"], c: "ÿµŸÑÿßŸÑÿ©"},
                {q: "ŸàŸäÿ¥ ÿßŸÑÿ±ŸÖÿ≤ ÿßŸÑŸÖŸàÿ¨ŸàÿØ ŸÅŸä ÿπŸÑŸÖŸÜÿßÿü", a: ["ÿßŸÑÿÆŸÜÿ¨ÿ± ŸàÿßŸÑÿ≥ŸäŸÅŸäŸÜ", "ÿßŸÑŸÜÿÆŸÑÿ©", "ÿßŸÑÿµŸÇÿ±"], c: "ÿßŸÑÿÆŸÜÿ¨ÿ± ŸàÿßŸÑÿ≥ŸäŸÅŸäŸÜ"},
                {q: "ÿßŸÑÿ±ÿ¨ÿßŸÑ ÿπŸÜÿØŸÜÿß ŸáŸäÿ¥ ŸäŸÑÿ®ÿ≥ŸàŸÜÿü", a: ["ÿØÿ¥ÿØÿßÿ¥ÿ©", "ÿ´Ÿàÿ®", "ÿ¨ŸÑÿßÿ®Ÿäÿ©"], c: "ÿØÿ¥ÿØÿßÿ¥ÿ©"},
                {q: "ÿßŸÑŸÑŸä ŸäŸÜÿ≠ÿ∑ ÿπŸÑŸâ ÿßŸÑÿ±ÿßÿ≥ ŸÅŸä ÿßŸÑÿ±ÿ≥ŸÖŸäÿßÿ™ ŸáŸäÿ¥ Ÿäÿ≥ŸÖŸàŸÜŸáÿü", a: ["ŸÖÿµÿ±", "ÿ∫ÿ™ÿ±ÿ©", "ÿ¥ŸÖÿßÿ∫"], c: "ŸÖÿµÿ±"},
                {q: "ŸàÿßŸÑŸÇÿ®ÿπÿ© ÿßŸÑŸÖÿ∑ÿ±ÿ≤ÿ© ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ŸÉŸÖÿ©", "ÿ∑ÿßŸÇŸäÿ©", "ÿπŸÖÿ©"], c: "ŸÉŸÖÿ©"},
                {q: "ÿßŸÑÿ≠ŸäŸàÿßŸÜ ÿßŸÑŸÑŸä Ÿäÿπÿ™ÿ®ÿ± ÿ±ŸÖÿ≤ ŸÑŸÑŸÖÿ≠ŸÖŸäÿßÿ™ ÿπŸÜÿØŸÜÿßÿü", a: ["ÿßŸÑŸÖŸáÿß ÿßŸÑÿπÿ±ÿ®Ÿä", "ÿßŸÑŸÜŸÖÿ±", "ÿßŸÑŸÅŸäŸÑ"], c: "ÿßŸÑŸÖŸáÿß ÿßŸÑÿπÿ±ÿ®Ÿä"},
                {q: "ÿ¥ÿ¨ÿ±ÿ© ÿßŸÑŸÑÿ®ÿßŸÜ ŸàŸäŸÜ ÿ™ŸÉÿ´ÿ±ÿü", a: ["ÿ∏ŸÅÿßÿ±", "ŸÖÿ≥ŸÇÿ∑", "ÿßŸÑÿ®ÿßÿ∑ŸÜÿ©"], c: "ÿ∏ŸÅÿßÿ±"},
                {q: "ÿ£ŸÉÿ®ÿ± ŸÖÿ∑ÿßÿ± ŸÅŸä ÿπŸÖÿßŸÜ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿü", a: ["ŸÖÿ∑ÿßÿ± ŸÖÿ≥ŸÇÿ∑", "ŸÖÿ∑ÿßÿ± ÿØÿ®Ÿä", "ŸÖÿ∑ÿßÿ± ÿßŸÑÿØŸàÿ≠ÿ©"], c: "ŸÖÿ∑ÿßÿ± ŸÖÿ≥ŸÇÿ∑"},
                {q: "ÿ®ÿ≠ÿ±ŸÜÿß ŸÖŸÜ ÿµŸàÿ® ÿßŸÑÿ¥ÿ±ŸÇ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿü", a: ["ÿ®ÿ≠ÿ± ÿßŸÑÿπÿ±ÿ®", "ÿßŸÑÿ®ÿ≠ÿ± ÿßŸÑÿ£ÿ≠ŸÖÿ±", "ÿßŸÑŸÖÿ™Ÿàÿ≥ÿ∑"], c: "ÿ®ÿ≠ÿ± ÿßŸÑÿπÿ±ÿ®"},
                {q: "ŸÖŸÜ ÿ¨Ÿäÿ±ÿßŸÜÿß ŸÖŸÜ ÿµŸàÿ® ÿßŸÑÿ∫ÿ±ÿ®ÿü", a: ["ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™ ŸàÿßŸÑÿ≥ÿπŸàÿØŸäÿ©", "ÿßŸÑŸÉŸàŸäÿ™", "ÿßŸÑÿπÿ±ÿßŸÇ"], c: "ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™ ŸàÿßŸÑÿ≥ÿπŸàÿØŸäÿ©"},
                {q: "ÿØŸäÿßŸÜÿ™ŸÜÿß ÿßŸÑÿ±ÿ≥ŸÖŸäÿ© ŸáŸäÿ¥ÿü", a: ["ÿßŸÑÿßÿ≥ŸÑÿßŸÖ", "ÿßŸÑŸÖÿ≥Ÿäÿ≠Ÿäÿ©", "ÿßŸÑŸáŸÜÿØŸàÿ≥Ÿäÿ©"], c: "ÿßŸÑÿßÿ≥ŸÑÿßŸÖ"},
                {q: "ÿ®ÿ£Ÿä ŸÑÿ∫ÿ© ŸÜÿ™ŸÉŸÑŸÖ ŸÅŸä ÿßŸÑÿØŸàÿßÿ¶ÿ± ÿßŸÑÿ≠ŸÉŸàŸÖŸäÿ©ÿü", a: ["ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", "ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©", "ÿßŸÑÿ£ÿ±ÿØŸäÿ©"], c: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©"},
                {q: "ÿ£ŸÉÿ®ÿ± ŸÖÿ≠ÿßŸÅÿ∏ÿ© ŸÅ ÿßŸÑŸÖÿ≥ÿßÿ≠ÿ© ŸáŸäÿ¥ ŸáŸäÿü", a: ["ÿßŸÑŸàÿ≥ÿ∑Ÿâ", "ŸÖÿ≥ŸÇÿ∑", "ŸÖÿ≥ŸÜÿØŸÖ"], c: "ÿßŸÑŸàÿ≥ÿ∑Ÿâ"},
                {q: "ŸäŸàŸÖ ÿßŸÑŸÜŸáÿ∂ÿ© 23 ŸäŸàŸÑŸäŸà ŸÉÿßŸÜ ŸÅ ÿπŸáÿØ ŸÖŸÜŸáŸàÿü", a: ["ÿßŸÑÿ≥ŸÑÿ∑ÿßŸÜ ŸÇÿßÿ®Ÿàÿ≥", "ÿßŸÑÿ≥ŸÑÿ∑ÿßŸÜ ŸáŸäÿ´ŸÖ", "ÿßŸÑÿ≥ŸÑÿ∑ÿßŸÜ ÿ≥ÿπŸäÿØ"], c: "ÿßŸÑÿ≥ŸÑÿ∑ÿßŸÜ ŸÇÿßÿ®Ÿàÿ≥"},
                {q: "ÿßŸÑÿ£ŸÉŸÑÿ© ÿßŸÑŸÑŸä ŸÜÿØŸÅŸÜŸáÿß ŸÅŸä ÿßŸÑÿ£ÿ±ÿ∂ ÿ£ŸäÿßŸÖ ÿßŸÑÿπŸäÿØ ŸáŸäÿ¥ÿü", a: ["ÿßŸÑÿ¥Ÿàÿßÿ°", "ÿßŸÑŸÖŸÉÿ®Ÿàÿ≥", "ÿßŸÑŸáÿ±Ÿäÿ≥"], c: "ÿßŸÑÿ¥Ÿàÿßÿ°"},
                {q: "ÿ∑Ÿäÿ±ÿßŸÜ ÿ®ŸÑÿßÿØŸÜÿß ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿü", a: ["ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ ÿßŸÑÿπŸÖÿßŸÜŸä", "ÿ∑Ÿäÿ±ÿßŸÜ ÿßŸÑÿÆŸÑŸäÿ¨", "ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™Ÿäÿ©"], c: "ÿßŸÑÿ∑Ÿäÿ±ÿßŸÜ ÿßŸÑÿπŸÖÿßŸÜŸä"},
                {q: "ŸÉŸÖ ŸÑŸàŸÜ ŸÅŸä ÿπŸÑŸÖ ÿπŸÖÿßŸÜ ÿ∫Ÿäÿ± ÿßŸÑÿ¥ÿπÿßÿ±ÿü", a: ["ÿ´ŸÑÿßÿ´ÿ©", "ÿ£ÿ±ÿ®ÿπÿ©", "ÿßÿ´ŸÜŸäŸÜ"], c: "ÿ´ŸÑÿßÿ´ÿ©"},
                {q: "ÿßŸÑŸÇŸáŸàÿ© ÿπŸÜÿØŸÜÿß ÿ±ŸÖÿ≤ ŸÑŸàŸäÿ¥ÿü", a: ["ÿßŸÑÿ∂ŸäÿßŸÅÿ© ŸàÿßŸÑŸÉÿ±ŸÖ", "ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ©", "ÿßŸÑÿ≤ÿ±ÿßÿπÿ©"], c: "ÿßŸÑÿ∂ŸäÿßŸÅÿ© ŸàÿßŸÑŸÉÿ±ŸÖ"},
                {q: "ŸÖŸäŸÜÿßÿ° ŸÖÿ≥ŸÇÿ∑ ÿßŸÑŸÇÿØŸäŸÖ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿü", a: ["ŸÖŸäŸÜÿßÿ° ŸÖÿ∑ÿ±ÿ≠", "ÿµÿ≠ÿßÿ±", "ÿµŸÑÿßŸÑÿ©"], c: "ŸÖŸäŸÜÿßÿ° ŸÖÿ∑ÿ±ÿ≠"},
                {q: "ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑÿ¥ÿπÿ®Ÿä ÿßŸÑŸÖÿπÿ±ŸàŸÅ ŸÅ ŸÖÿ≥ŸÇÿ∑ÿü", a: ["ÿ≥ŸàŸÇ ŸÖÿ∑ÿ±ÿ≠", "ÿ≥ŸàŸÇ ÿßŸÑŸÖÿ®ÿßÿ±ŸÉŸäÿ©", "ŸàÿßŸÇŸÅ"], c: "ÿ≥ŸàŸÇ ŸÖÿ∑ÿ±ÿ≠"},
                {q: "ÿ≥ŸÅŸÜŸÜÿß ÿßŸÑŸÇÿØŸäŸÖÿ© ŸáŸäÿ¥ Ÿäÿ≥ŸÖŸàŸÜŸáÿßÿü", a: ["ÿßŸÑÿØÿßŸà", "ÿßŸÑŸäÿÆŸàÿ™", "ÿßŸÑÿπÿ®ÿßÿ±ÿßÿ™"], c: "ÿßŸÑÿØÿßŸà"},
                {q: "ŸäŸàŸÖ ŸÜÿ≥ŸÑŸÖ ÿπŸÑŸâ ÿ≠ÿØ ŸáŸäÿ¥ ŸÜŸÇŸàŸÑÿü", a: ["ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑŸäŸÉŸÖ", "ŸÖÿ±ÿ≠ÿ®ÿßŸã", "ÿµÿ®ÿßÿ≠ ÿßŸÑÿÆŸäÿ±"], c: "ÿßŸÑÿ≥ŸÑÿßŸÖ ÿπŸÑŸäŸÉŸÖ"},
                {q: "ÿßŸÑŸÅÿßŸÉŸáÿ© ÿßŸÑŸÑŸä ŸÜÿ≤ÿ±ÿπŸáÿß ŸàÿßŸäÿØ Ÿàÿ™ÿ¨Ÿä ŸÖŸÜ ÿßŸÑŸÜÿÆŸÑÿü", a: ["ÿßŸÑÿ±ÿ∑ÿ®/ÿßŸÑÿ™ŸÖÿ±", "ŸÅÿ±ÿßŸàŸÑÿ©", "ÿ£ŸÜÿßŸÜÿßÿ≥"], c: "ÿßŸÑÿ±ÿ∑ÿ®/ÿßŸÑÿ™ŸÖÿ±"},
                {q: "ÿßŸÑÿ≥ŸÖŸÉÿ© ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© ÿßŸÑŸÑŸä ŸÜÿ¨ŸÅŸÅŸáÿß Ÿàÿ™ŸÉÿ´ÿ± ÿπŸÜÿØŸÜÿßÿü", a: ["ÿßŸÑÿπŸàŸÖÿ©", "ÿ≥ŸÑŸÖŸàŸÜ", "ŸÇÿ±ÿ¥"], c: "ÿßŸÑÿπŸàŸÖÿ©"}
            ],
            MEDIUM: [
                {q: "ÿßŸÑÿ±Ÿä ŸÖÿßŸÑ ÿßŸÑÿ£ŸàŸÑŸäŸÜ ŸáŸäÿ¥ Ÿäÿ≥ŸÖŸàŸÜŸáÿü", a: ["ÿßŸÑÿ£ŸÅŸÑÿßÿ¨", "ÿßŸÑÿ¢ÿ®ÿßÿ±", "ÿßŸÑÿ≥ÿØŸàÿØ"], c: "ÿßŸÑÿ£ŸÅŸÑÿßÿ¨"},
                {q: "ÿ£ÿπŸÑŸâ ÿ¨ÿ®ŸÑ ŸÅŸä ÿπŸÖÿßŸÜ ŸàŸäŸÜÿü", a: ["ÿ¨ÿ®ŸÑ ÿ¥ŸÖÿ≥", "ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ±", "ÿ≥ŸÖÿ≠ÿßŸÜ"], c: "ÿ¨ÿ®ŸÑ ÿ¥ŸÖÿ≥"},
                {q: "ŸàŸäŸÜ ÿ™ŸÇÿπ ÿßŸÑŸÇŸÑÿπÿ© ÿßŸÑŸÉÿ®Ÿäÿ±ÿ© ÿßŸÑŸÖÿØŸàÿ±ÿ© (ÿßŸÑÿ¥Ÿáÿ®ÿßÿ°)ÿü", a: ["ŸÜÿ≤ŸàŸâ", "ÿµÿ≠ÿßÿ±", "ÿµŸàÿ±"], c: "ŸÜÿ≤ŸàŸâ"},
                {q: "ÿßŸÑŸÇŸÑÿπÿ© ÿßŸÑŸÑŸä ÿ≥Ÿàÿ±Ÿáÿß ÿ∑ŸàŸäŸÑ ŸàŸÖÿ≥ÿ¨ŸÑÿ© ŸÅ ÿßŸÑŸäŸàŸÜÿ≥ŸÉŸàÿü", a: ["ŸÇŸÑÿπÿ© ÿ®ŸáŸÑÿßÿ°", "ŸÜÿÆŸÑ", "ÿßŸÑÿ≠ÿ≤ŸÖ"], c: "ŸÇŸÑÿπÿ© ÿ®ŸáŸÑÿßÿ°"},
                {q: "ÿßŸÑŸÖÿ∂ŸäŸÇ ÿßŸÑŸÑŸä ŸÜÿ∑ŸÑ ÿπŸÑŸäŸá ŸàŸäÿ™ÿ≠ŸÉŸÖ ŸÅ ÿßŸÑÿ™ÿ¨ÿßÿ±ÿ©ÿü", a: ["ŸÖÿ∂ŸäŸÇ Ÿáÿ±ŸÖÿ≤", "ÿ®ÿßÿ® ÿßŸÑŸÖŸÜÿØÿ®", "ÿ¨ÿ®ŸÑ ÿ∑ÿßÿ±ŸÇ"], c: "ŸÖÿ∂ŸäŸÇ Ÿáÿ±ŸÖÿ≤"},
                {q: "ÿßŸÑŸàŸÑÿßŸäÿ© ÿßŸÑŸÑŸä ŸäÿµŸÜÿπŸàŸÜ ŸÅŸäŸáÿß ÿ≥ŸÅŸÜ ÿßŸÑÿÆÿ¥ÿ®ÿü", a: ["ÿµŸàÿ±", "ŸÇÿ±Ÿäÿßÿ™", "ÿ®ÿ±ŸÉÿßÿ°"], c: "ÿµŸàÿ±"},
                {q: "ÿßŸÑŸàÿßÿØŸä ÿßŸÑŸÑŸä ŸÖÿßŸäŸá ÿ£ÿÆÿ∂ÿ± ÿ∑ŸàŸÑ ÿßŸÑÿ≥ŸÜÿ© ŸÅ ÿßŸÑÿ¥ÿ±ŸÇŸäÿ©ÿü", a: ["ŸàÿßÿØŸä ÿ®ŸÜŸä ÿÆÿßŸÑÿØ", "ŸàÿßÿØŸä ÿ∫ŸàŸÑ", "ÿßŸÑÿ¨ÿ≤Ÿä"], c: "ŸàÿßÿØŸä ÿ®ŸÜŸä ÿÆÿßŸÑÿØ"},
                {q: "ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑŸÑŸä Ÿäÿ≤ÿ±ÿπŸàŸÜ ŸÅŸäŸá ÿ±ŸÖÿßŸÜ ŸàŸàÿ±ÿØ? ", a: ["ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ±", "ÿ¥ŸÖÿ≥", "ÿßŸÑŸÉŸàÿ±"], c: "ÿßŸÑÿ¨ÿ®ŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ±"},
                {q: "ÿ¨ÿ≤Ÿäÿ±ÿ© ÿßŸÑÿ≥ŸÑÿßÿ≠ŸÅ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ŸÖÿµŸäÿ±ÿ©", "ÿßŸÑÿ≠ŸÑÿßŸÜŸäÿßÿ™", "ÿßŸÑŸÅÿ≠ŸÑ"], c: "ŸÖÿµŸäÿ±ÿ©"},
                {q: "ÿØÿßÿ± ÿßŸÑÿ£Ÿàÿ®ÿ±ÿß ŸàŸäŸÜ ŸÖŸÉÿßŸÜŸáÿß ÿ®ÿßŸÑÿ∂ÿ®ÿ∑ÿü", a: ["ÿßŸÑŸÇÿ±ŸÖ", "ŸÖÿ∑ÿ±ÿ≠", "ÿßŸÑÿÆŸàŸäÿ±"], c: "ÿßŸÑŸÇÿ±ŸÖ"},
                {q: "ÿ≥ÿØ ŸàÿßÿØŸä ÿ∂ŸäŸÇÿ© ŸàŸäŸÜ ŸÖŸÉÿßŸÜŸáÿü", a: ["ŸÇÿ±Ÿäÿßÿ™", "ÿßŸÑÿπÿßŸÖÿ±ÿßÿ™", "ÿ®ÿØÿ®ÿØ"], c: "ŸÇÿ±Ÿäÿßÿ™"},
                {q: "ÿ£ŸÉÿ®ÿ± ŸÉŸáŸÅ ŸÅ ÿπŸÖÿßŸÜ (ŸÖÿ¨ŸÑÿ≥ ÿßŸÑÿ¨ŸÜ) ŸàŸäŸÜÿü", a: ["Ÿáÿ∂ÿ®ÿ© ÿ≥ŸÑŸÖÿßŸá/ŸÇÿ±Ÿäÿßÿ™", "ŸÜÿ≤ŸàŸâ", "ÿπÿ®ÿ±Ÿä"], c: "Ÿáÿ∂ÿ®ÿ© ÿ≥ŸÑŸÖÿßŸá/ŸÇÿ±Ÿäÿßÿ™"},
                {q: "ÿßŸÑÿ≥ŸÅŸäŸÜÿ© ÿßŸÑŸÑŸä ÿ±ÿßÿ≠ÿ™ ŸÑŸäŸÜ ÿßŸÑÿµŸäŸÜ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ÿ≥ŸÅŸäŸÜÿ© ÿµÿ≠ÿßÿ±", "ÿ¨ŸàŸáÿ±ÿ© ŸÖÿ≥ŸÇÿ∑", "ŸÖÿ¨ÿßŸÜ"], c: "ÿ≥ŸÅŸäŸÜÿ© ÿµÿ≠ÿßÿ±"},
                {q: "ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏ÿ© ÿßŸÑŸÖŸÅÿµŸàŸÑŸá ÿπŸÜÿß ŸÅŸàŸÇ ÿµŸàÿ® ÿßŸÑÿ¥ŸÖÿßŸÑÿü", a: ["ŸÖÿ≥ŸÜÿØŸÖ", "ÿßŸÑÿ®ÿ±ŸäŸÖŸä", "ÿßŸÑÿ∏ÿßŸáÿ±ÿ©"], c: "ŸÖÿ≥ŸÜÿØŸÖ"},
                {q: "ÿßŸÑŸÅŸÜ ÿßŸÑŸÑŸä ŸäŸÑÿπÿ®ŸàŸÜ ŸÅŸäŸá ÿ®ÿßŸÑÿ≥ŸäŸÅ ŸàÿßŸÑÿπÿµÿßÿü", a: ["ÿßŸÑÿ±ÿ≤ÿ≠ÿ©", "ÿßŸÑŸÖŸäÿØÿßŸÜ", "ÿßŸÑÿ™ÿ∫ÿ±ŸàÿØ"], c: "ÿßŸÑÿ±ÿ≤ÿ≠ÿ©"},
                {q: "ÿπŸäŸÜ ÿ≠ÿßÿ±ÿ© ŸÅ ÿßŸÑÿ±ÿ≥ÿ™ÿßŸÇ ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ÿπŸäŸÜ ÿßŸÑŸÉÿ≥ŸÅÿ©", "ÿßŸÑÿ´Ÿàÿßÿ±ÿ©", "ÿ£ÿ±ÿ≤ÿßÿ™"], c: "ÿπŸäŸÜ ÿßŸÑŸÉÿ≥ŸÅÿ©"},
                {q: "ŸàÿπŸäŸÜ ÿ≠ÿßÿ±ÿ© ŸÅ ŸÜÿÆŸÑÿü", a: ["ÿßŸÑÿ´Ÿàÿßÿ±ÿ©", "ÿßŸÑŸÉÿ≥ŸÅÿ©", "ÿ≠ŸÖÿ±ÿßŸÜ"], c: "ÿßŸÑÿ´Ÿàÿßÿ±ÿ©"},
                {q: "ŸÖÿØŸäŸÜÿ™ŸÜÿß ÿßŸÑŸÑŸä ŸÉÿßŸÜŸàÿß Ÿäÿ≥ŸÖŸàŸÜŸáÿß ÿØŸáŸÑŸäÿ≤ ÿßŸÑÿµŸäŸÜÿü", a: ["ÿµÿ≠ÿßÿ±", "ŸÖÿ≥ŸÇÿ∑", "ŸÇŸÑŸáÿßÿ™"], c: "ÿµÿ≠ÿßÿ±"},
                {q: "ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿßŸÇÿ™ÿµÿßÿØŸäÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ© ŸÅÿßŸÑŸàÿ≥ÿ∑Ÿâÿü", a: ["ÿßŸÑÿØŸÇŸÖ", "ŸáŸäŸÖÿßÿ°", "ŸÖÿ≠Ÿàÿ™"], c: "ÿßŸÑÿØŸÇŸÖ"},
                {q: "ÿßŸÑŸÇŸÑÿßÿπ ÿßŸÑŸÑŸä ÿ™ÿ≠ÿ±ÿ≥ ŸÖÿ≥ŸÇÿ∑ ÿßŸÑŸÇÿØŸäŸÖÿ©ÿü", a: ["ÿßŸÑÿ¨ŸÑÿßŸÑŸä ŸàÿßŸÑŸÖŸäÿ±ÿßŸÜŸä", "ŸÜÿ≤ŸàŸâ Ÿàÿ®ŸáŸÑÿßÿ°", "ÿßŸÑÿ≠ÿ≤ŸÖ ŸàÿßŸÑÿ±ÿ≥ÿ™ÿßŸÇ"], c: "ÿßŸÑÿ¨ŸÑÿßŸÑŸä ŸàÿßŸÑŸÖŸäÿ±ÿßŸÜŸä"},
                {q: "ŸÖÿ™ÿ≠ŸÅ ŸÖÿ¥ŸáŸàÿ± ŸÅ ŸÖÿ≥ŸÇÿ∑ ÿßŸÑŸÇÿØŸäŸÖÿ©ÿü", a: ["ÿ®Ÿäÿ™ ÿßŸÑÿ≤ÿ®Ÿäÿ±", "ÿßŸÑŸàÿ∑ŸÜŸä", "ÿßŸÑÿ∑ŸÅŸÑ"], c: "ÿ®Ÿäÿ™ ÿßŸÑÿ≤ÿ®Ÿäÿ±"},
                {q: "ÿßÿ≥ŸÖ ÿ∏ŸÅÿßÿ± ÿßŸÑÿ£ŸàŸÑŸä ŸáŸäÿ¥ ŸÉÿßŸÜÿü", a: ["ÿßŸÑÿ£ÿ≠ŸÇÿßŸÅ", "ŸÖÿ¨ÿßŸÜ", "ŸÖÿ≤ŸàŸÜ"], c: "ÿßŸÑÿ£ÿ≠ŸÇÿßŸÅ"},
                {q: "ÿÆÿ®ÿ≤ŸÜÿß ÿßŸÑÿπŸÖÿßŸÜŸä ÿßŸÑÿÆŸÅŸäŸÅ ŸáŸäÿ¥ ŸÜÿ≥ŸÖŸäŸáÿü", a: ["ÿÆÿ®ÿ≤ ÿ±ÿÆÿßŸÑ", "ÿ™ŸÜŸàÿ±", "ÿ¥ÿ®ÿßÿ™Ÿä"], c: "ÿÆÿ®ÿ≤ ÿ±ÿÆÿßŸÑ"},
                {q: "ÿ≥ŸàŸÇ ÿßŸÑÿ∫ŸÜŸÖ ŸÇÿ®ŸÑ ÿßŸÑÿπŸäÿØ ŸáŸäÿ¥ ŸÜÿ≥ŸÖŸäŸáÿü", a: ["ÿßŸÑŸáÿ®ÿ∑ÿ©", "ÿßŸÑÿ≠ÿ±ÿßÿ¨", "ÿßŸÑŸÖÿ≤ÿßÿØ"], c: "ÿßŸÑŸáÿ®ÿ∑ÿ©"},
                {q: "ÿ£ŸàŸÑ ÿ≥ŸÅŸäŸÜÿ© ÿ±ÿßÿ≠ÿ™ ÿ£ŸÖÿ±ŸäŸÉÿßÿü", a: ["ÿ≥ŸÑÿ∑ÿßŸÜÿ©", "ÿµÿ≠ÿßÿ±", "ÿßŸÑÿ±ÿ≠ŸÖÿßŸÜŸä"], c: "ÿ≥ŸÑÿ∑ÿßŸÜÿ©"},
                {q: "ÿ¨ÿ≤ÿ± ŸÅŸäŸáÿß ÿ¥ÿπÿßÿ® ŸÖÿ±ÿ¨ÿßŸÜŸäÿ© ŸÅ ŸÖÿ≥ŸÇÿ∑ÿü", a: ["ÿßŸÑÿØŸäŸÖÿßŸÜŸäÿßÿ™", "ÿßŸÑÿ≠ŸÑÿßŸÜŸäÿßÿ™", "ŸÖÿµŸäÿ±ÿ©"], c: "ÿßŸÑÿØŸäŸÖÿßŸÜŸäÿßÿ™"},
                {q: "ÿßŸÑŸàÿßÿØŸä ÿßŸÑŸÑŸä ŸÑÿßÿ≤ŸÖ ÿ™ÿ±ŸÉÿ® ŸÇÿßÿ±ÿ® ÿπÿ¥ÿßŸÜ ÿ™ÿØÿÆŸÑŸá ŸÅ ÿ∑ŸäŸàŸäÿü", a: ["ŸàÿßÿØŸä ÿ¥ÿßÿ®", "ÿ®ŸÜŸä ÿÆÿ±Ÿàÿµ", "ÿßŸÑÿ£ÿ®Ÿäÿ∂"], c: "ŸàÿßÿØŸä ÿ¥ÿßÿ®"},
                {q: "ÿßŸÑÿµŸÜÿØŸàŸÇ ÿßŸÑÿÆÿ¥ÿ®Ÿä ŸÖÿßŸÑ ÿßŸÑŸÖŸÑÿßÿ®ÿ≥ ŸáŸäÿ¥ ŸÜÿ≥ŸÖŸäŸáÿü", a: ["ÿßŸÑŸÖŸÜÿØŸàÿ≥", "ÿßŸÑÿµŸÜÿØŸàŸÇ", "ÿßŸÑÿ≥ÿ≠ÿßÿ±ÿ©"], c: "ÿßŸÑŸÖŸÜÿØŸàÿ≥"},
                {q: "ŸàŸäŸÜ ŸäŸÇÿπ ÿ≠ÿµŸÜ ÿßŸÑÿ≠ÿ≤ŸÖÿü", a: ["ÿßŸÑÿ±ÿ≥ÿ™ÿßŸÇ", "ÿßŸÑŸÖÿµŸÜÿπÿ©", "ÿ®ÿ±ŸÉÿßÿ°"], c: "ÿßŸÑÿ±ÿ≥ÿ™ÿßŸÇ"},
                {q: "ŸàŸäŸÜ ŸäÿµŸÑÿ≠ŸàŸÜ ÿßŸÑÿ≥ŸÅŸÜ ÿßŸÑŸÉÿ®ÿßÿ± (ÿßŸÑÿ≠Ÿàÿ∂ ÿßŸÑÿ¨ÿßŸÅ)ÿü", a: ["ÿßŸÑÿØŸÇŸÖ", "ÿµÿ≠ÿßÿ±", "ÿµŸÑÿßŸÑÿ©"], c: "ÿßŸÑÿØŸÇŸÖ"}
            ],
            HARD: [
                {q: "ÿ£Ÿä ÿ≥ŸÜÿ© ÿ∑ÿ±ÿØŸÜÿß ÿßŸÑÿ®ÿ±ÿ™ÿ∫ÿßŸÑŸäŸäŸÜ ŸÜŸáÿßÿ¶ŸäÿßŸãÿü", a: ["1650", "1507", "1741"], c: "1650"},
                {q: "ŸÖŸÜŸáŸà ŸÖÿ§ÿ≥ÿ≥ ÿØŸàŸÑÿ© ÿßŸÑÿ®Ÿàÿ≥ÿπŸäÿØÿü", a: ["ÿ£ÿ≠ŸÖÿØ ÿ®ŸÜ ÿ≥ÿπŸäÿØ", "ÿ≥ŸÑÿ∑ÿßŸÜ ÿ®ŸÜ ÿ≥ŸäŸÅ", "ÿ≥ŸäŸÅ ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ"], c: "ÿ£ÿ≠ŸÖÿØ ÿ®ŸÜ ÿ≥ÿπŸäÿØ"},
                {q: "ÿßÿ≥ŸÖ ÿπŸÖÿßŸÜ ÿßŸÑŸÇÿØŸäŸÖ (ÿ¨ÿ®ŸÑ ÿßŸÑŸÜÿ≠ÿßÿ≥) ŸáŸäÿ¥ ŸáŸàÿü", a: ["ŸÖÿ¨ÿßŸÜ", "ŸÖÿ≤ŸàŸÜ", "ÿßŸÑÿ∫ÿ®Ÿäÿ±ÿßÿ°"], c: "ŸÖÿ¨ÿßŸÜ"},
                {q: "ŸàŸÖÿπŸÜŸâ ÿßÿ≥ŸÖ (ŸÖÿ≤ŸàŸÜ) ŸáŸäÿ¥ÿü", a: ["ÿßŸÑŸÖŸäÿßŸá ÿßŸÑŸàÿßÿ¨ÿØÿ©", "ÿßŸÑŸÜÿ≠ÿßÿ≥", "ÿßŸÑÿ¨ÿ®ŸÑ"], c: "ÿßŸÑŸÖŸäÿßŸá ÿßŸÑŸàÿßÿ¨ÿØÿ©"},
                {q: "ÿßŸÑŸÖŸÑÿßÿ≠ ÿßŸÑÿπŸÖÿßŸÜŸä ÿßŸÑŸÖŸÑŸÇÿ® ÿ®ÿ£ÿ≥ÿØ ÿßŸÑÿ®ÿ≠ÿßÿ± ŸÖŸÜŸáŸàÿü", a: ["ÿ£ÿ≠ŸÖÿØ ÿ®ŸÜ ŸÖÿßÿ¨ÿØ", "ŸÜÿßÿµÿ± ÿ®ŸÜ ŸÖÿ±ÿ¥ÿØ", "ŸÉÿπÿ® ÿ®ŸÜ ÿ≤ŸáŸäÿ±"], c: "ÿ£ÿ≠ŸÖÿØ ÿ®ŸÜ ŸÖÿßÿ¨ÿØ"},
                {q: "ŸÖŸÜŸáŸà ÿßŸÑÿ•ŸÖÿßŸÖ ÿßŸÑŸÑŸä ÿ®ŸÜŸâ ŸÇŸÑÿπÿ© ŸÜÿ≤ŸàŸâÿü", a: ["ÿ≥ŸÑÿ∑ÿßŸÜ ÿ®ŸÜ ÿ≥ŸäŸÅ", "ŸÜÿßÿµÿ± ÿ®ŸÜ ŸÖÿ±ÿ¥ÿØ", "ÿ®ŸÑÿπÿ±ÿ®"], c: "ÿ≥ŸÑÿ∑ÿßŸÜ ÿ®ŸÜ ÿ≥ŸäŸÅ"},
                {q: "Ÿàÿ≠ÿµŸÜ ÿ¨ÿ®ÿ±ŸäŸÜ ÿßŸÑÿ≤ŸäŸÜ ŸÖŸÜŸáŸà ÿ®ÿßŸÜŸäŸáÿü", a: ["ÿ®ŸÑÿπÿ±ÿ® ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ", "ÿ≥ŸÑÿ∑ÿßŸÜ ÿ®ŸÜ ÿ≥ŸäŸÅ", "ÿ≥ŸäŸÅ ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ"], c: "ÿ®ŸÑÿπÿ±ÿ® ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ"},
                {q: "ÿßŸÑÿπÿßŸÑŸÖ ÿßŸÑŸÑŸä ÿ≥ŸàŸâ ÿπŸÑŸÖ ÿßŸÑÿπÿ±Ÿàÿ∂ ŸàŸÖÿπÿ¨ŸÖ ÿßŸÑÿπŸäŸÜÿü", a: ["ÿßŸÑÿÆŸÑŸäŸÑ ÿ®ŸÜ ÿ£ÿ≠ŸÖÿØ", "ÿßÿ®ŸÜ ÿØÿ±ŸäÿØ", "ÿßŸÑŸÖÿ®ÿ±ÿØ"], c: "ÿßŸÑÿÆŸÑŸäŸÑ ÿ®ŸÜ ÿ£ÿ≠ŸÖÿØ"},
                {q: "ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØÿ© ŸÅ ÿßŸÑÿ±ÿ®ÿπ ÿßŸÑÿÆÿßŸÑŸä ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ÿ£Ÿàÿ®ÿßÿ±", "ÿ≥ŸÖŸáÿ±ŸÖ", "ÿßŸÑÿ®ŸÑŸäÿØ"], c: "ÿ£Ÿàÿ®ÿßÿ±"},
                {q: "ŸÖŸäŸÜÿßÿ° ÿßŸÑŸÑÿ®ÿßŸÜ ÿßŸÑŸÇÿØŸäŸÖ ŸÅ ÿ∏ŸÅÿßÿ±ÿü", a: ["ÿßŸÑÿ®ŸÑŸäÿØ", "ŸÖÿ±ÿ®ÿßÿ∑", "ÿ≥ÿØÿ≠"], c: "ÿßŸÑÿ®ŸÑŸäÿØ"},
                {q: "ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑÿ™ÿßÿ±ŸäÿÆŸäÿ© ÿßŸÑŸÑŸä ÿØŸÖÿ±Ÿáÿß ÿßŸÑÿ≤ŸÑÿ≤ÿßŸÑ ŸÅ ÿµŸàÿ±ÿü", a: ["ŸÇŸÑŸáÿßÿ™", "ÿ∑ŸäŸàŸä", "ÿ±ÿ£ÿ≥ ÿßŸÑÿ≠ÿØ"], c: "ŸÇŸÑŸáÿßÿ™"},
                {q: "ŸÇÿ®ÿ± (ÿ®Ÿäÿ®Ÿä ŸÖÿ±ŸäŸÖ) ŸàŸäŸÜ ŸÖÿ≠ŸÑŸáÿü", a: ["ŸÇŸÑŸáÿßÿ™", "ŸÜÿ≤ŸàŸâ", "ÿµÿ≠ÿßÿ±"], c: "ŸÇŸÑŸáÿßÿ™"},
                {q: "ÿ£ÿπŸÖŸÇ ŸÅŸÑÿ¨ ŸÅ ÿπŸÖÿßŸÜ ŸàŸÖÿ≥ÿ¨ŸÑ ŸÅ ÿßŸÑŸäŸàŸÜÿ≥ŸÉŸàÿü", a: ["ŸÅŸÑÿ¨ ÿßŸÑŸÖŸÑŸÉŸä", "ÿßŸÑÿ¨ŸäŸÑÿ©", "ÿØÿßÿ±ÿ≥"], c: "ŸÅŸÑÿ¨ ÿßŸÑŸÖŸÑŸÉŸä"},
                {q: "ÿ£ÿ∑ŸàŸÑ ŸÅŸÑÿ¨ ÿπŸÜÿØŸÜÿß ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿü", a: ["ŸÅŸÑÿ¨ ÿØÿßÿ±ÿ≥", "ÿßŸÑŸÖŸäÿ≥ÿ±", "ÿßŸÑÿÆÿ∑ŸÖŸäŸÜ"], c: "ŸÅŸÑÿ¨ ÿØÿßÿ±ÿ≥"},
                {q: "ŸÖÿ™Ÿâ ÿØÿÆŸÑÿ™ ÿπŸÖÿßŸÜ ÿßŸÑÿ£ŸÖŸÖ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©ÿü", a: ["1971", "1970", "1975"], c: "1971"},
                {q: "ÿßŸÑŸÅŸÜ ÿßŸÑŸÑŸä ŸÅŸäŸá ÿ¥ÿπÿ± ŸàŸÅÿÆÿ± Ÿàÿ®ÿØŸàŸÜ ÿ∑ÿ®ŸàŸÑÿü", a: ["ÿßŸÑÿπÿßÿ≤Ÿä", "ÿßŸÑŸáŸÖÿ®ŸÑ", "ÿßŸÑÿ±ÿ≤ÿ≠ÿ©"], c: "ÿßŸÑÿπÿßÿ≤Ÿä"},
                {q: "ŸÖÿØÿßŸÅŸÜ ÿ¥ŸÉŸÑŸáÿß ŸÖÿ´ŸÑ ÿÆŸÑŸäÿ© ÿßŸÑŸÜÿ≠ŸÑ ŸÅ ÿπÿ®ÿ±Ÿä ŸàŸäŸÜÿü", a: ["ÿ®ÿßÿ™ ŸàÿßŸÑÿÆÿ∑ŸÖ", "ÿ≤ŸÉŸäÿ™", "ÿ≥ŸÖÿØ"], c: "ÿ®ÿßÿ™ ŸàÿßŸÑÿÆÿ∑ŸÖ"},
                {q: "ÿßŸÑÿ≥ŸÅŸäŸÜÿ© ÿßŸÑÿπŸàÿØÿ© (ÿßŸÑŸÉÿ®Ÿäÿ±ÿ©) ŸÖÿßŸÑÿ™ ÿßŸÑŸÖÿ≠Ÿäÿ∑ÿßÿ™ ŸáŸäÿ¥ Ÿäÿ≥ŸÖŸàŸÜŸáÿßÿü", a: ["ÿßŸÑÿ∫ÿßŸÜÿ¨ÿ©", "ÿßŸÑŸáŸàÿ±Ÿä", "ÿßŸÑÿ¥ÿßÿ¥Ÿá"], c: "ÿßŸÑÿ∫ÿßŸÜÿ¨ÿ©"},
                {q: "ŸäŸàŸÖ ÿßŸÑŸÖÿ±ÿ£ÿ© ÿßŸÑÿπŸÖÿßŸÜŸäÿ© ÿ£Ÿä ÿ™ÿßÿ±ŸäÿÆÿü", a: ["17 ÿ£ŸÉÿ™Ÿàÿ®ÿ±", "18 ŸÜŸàŸÅŸÖÿ®ÿ±", "8 ŸÖÿßÿ±ÿ≥"], c: "17 ÿ£ŸÉÿ™Ÿàÿ®ÿ±"},
                {q: "ŸÖÿ™Ÿâ ŸàŸÇÿπŸàÿß ÿßÿ™ŸÅÿßŸÇŸäÿ© ÿßŸÑÿ≥Ÿäÿ®ÿü", a: ["1920", "1955", "1913"], c: "1920"},
                {q: "ÿ£ŸàŸÑ ÿ¨ÿ±ŸäÿØÿ© ÿπŸÖÿßŸÜŸäÿ© ŸÅ ÿ≤ŸÜÿ¨ÿ®ÿßÿ± ŸáŸäÿ¥ ŸÉÿßŸÜ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ÿßŸÑŸÅŸÑŸÇ", "ÿßŸÑŸÜÿ¨ÿßÿ≠", "ÿßŸÑŸÜŸáÿ∂ÿ©"], c: "ÿßŸÑŸÜÿ¨ÿßÿ≠"},
                {q: "ÿ≠ÿµŸÜ ÿßŸÑÿ≥ŸÑŸäŸÅ ŸàŸäŸÜ ŸäŸÇÿπÿü", a: ["ÿπÿ®ÿ±Ÿä", "ŸÖŸÇÿ¥ŸÜ", "ÿ£ÿØŸÖ"], c: "ÿπÿ®ÿ±Ÿä"},
                {q: "ÿßŸÑÿ•ŸÖÿßŸÖ ÿßŸÑŸÑŸä Ÿàÿ≠ÿØ ÿßŸÑÿ®ŸÑÿßÿØ Ÿàÿ®ÿØÿ£ ÿØŸàŸÑÿ© ÿßŸÑŸäÿπÿßÿ±ÿ®ÿ©ÿü", a: ["ŸÜÿßÿµÿ± ÿ®ŸÜ ŸÖÿ±ÿ¥ÿØ", "ÿ≥ŸÑÿ∑ÿßŸÜ ÿ®ŸÜ ÿ≥ŸäŸÅ", "ŸÖÿ±ÿ¥ÿØ"], c: "ŸÜÿßÿµÿ± ÿ®ŸÜ ŸÖÿ±ÿ¥ÿØ"},
                {q: "ŸÖŸàÿ≥ŸÖ ÿÆÿ±ÿßŸÅ ÿßŸÑÿ±ÿ∑ÿ® ŸáŸäÿ¥ ŸÜÿ≥ŸÖŸäŸáÿü", a: ["ÿßŸÑŸÇŸäÿ∏", "ÿßŸÑÿµÿ±ÿßŸÖ", "ÿßŸÑÿ¨ÿØÿßÿØ"], c: "ÿßŸÑŸÇŸäÿ∏"},
                {q: "ÿßŸÑŸÇÿßÿ¶ÿØ ÿßŸÑŸÑŸä ÿ≠ÿ±ÿ± ŸÖŸÖÿ®ÿßÿ≥ÿß Ÿàÿ≥ŸÖŸàŸá (ŸÇŸäÿØ ÿßŸÑÿ£ÿ±ÿ∂)ÿü", a: ["ÿ≥ŸäŸÅ ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ", "ÿ£ÿ≠ŸÖÿØ ÿ®ŸÜ ÿ≥ÿπŸäÿØ", "ÿ´ŸàŸäŸÜŸä"], c: "ÿ≥ŸäŸÅ ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ"},
                {q: "ÿßŸÑÿ®ÿ±ŸäŸÖŸä ŸàŸäÿ¥ ŸÉÿßŸÜ ÿßÿ≥ŸÖŸáÿß ŸÇÿ®ŸÑÿü", a: ["ÿ™ŸàÿßŸÖ", "ÿßŸÑÿ¨ŸàŸÅ", "ÿßŸÑÿ≥ÿ±"], c: "ÿ™ŸàÿßŸÖ"},
                {q: "ŸÅŸÜ ÿßŸÑÿ≠ÿ±ŸäŸÖ ÿßŸÑŸÖÿπÿ±ŸàŸÅ ŸÅ ÿ∏ŸÅÿßÿ±ÿü", a: ["ÿßŸÑÿ∑ÿ®ŸÑ", "ÿßŸÑÿ±ÿ≤ÿ≠ÿ©", "ÿßŸÑÿπÿßÿ≤Ÿä"], c: "ÿßŸÑÿ∑ÿ®ŸÑ"},
                {q: "ÿßŸÑŸÖÿπÿßŸáÿØÿ© ŸÖÿπ ÿ®ÿ±Ÿäÿ∑ÿßŸÜŸäÿß ÿπÿßŸÖ 1839 ŸáŸäÿ¥ ÿßÿ≥ŸÖŸáÿßÿü", a: ["ÿßŸÑÿµÿØÿßŸÇÿ© ŸàÿßŸÑÿ™ÿ¨ÿßÿ±ÿ©", "ÿßŸÑÿ≠ŸÖÿßŸäÿ©", "ŸÖÿ≥ŸÇÿ∑"], c: "ÿßŸÑÿµÿØÿßŸÇÿ© ŸàÿßŸÑÿ™ÿ¨ÿßÿ±ÿ©"},
                {q: "ÿ≠ÿµŸÜ ÿßŸÑÿ£ÿ≥ŸàÿØ ŸàŸäŸÜ ŸÖŸÉÿßŸÜŸáÿü", a: ["ÿπÿ®ÿ±Ÿä", "ŸÖŸÇÿ¥ŸÜ", "ÿ£ÿØŸÖ"], c: "ÿπÿ®ÿ±Ÿä"},
                {q: "ÿπÿßÿµŸÖÿ© ÿπŸÖÿßŸÜ ŸÅ ÿ≤ŸÖŸÜ ÿßŸÑÿ≥ŸäÿØ ÿ≥ÿπŸäÿØ ÿ®ŸÜ ÿ≥ŸÑÿ∑ÿßŸÜ ŸÉÿßŸÜÿ™ ŸÖÿ≥ŸÇÿ∑ Ÿà...ÿü", a: ["ÿ≤ŸÜÿ¨ÿ®ÿßÿ±", "ŸÖŸÉÿ±ÿßŸÜ", "ÿ¨ŸàÿßÿØŸàÿ±"], c: "ÿ≤ŸÜÿ¨ÿ®ÿßÿ±"}
            ]
        };

        // --- AUDIO ENGINE ---
        const playSound = (type) => {
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (!AudioContext) return;
                const ctx = new AudioContext();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                const now = ctx.currentTime;

                const sounds = {
                    click: () => { 
                        osc.type = 'sine'; 
                        osc.frequency.setValueAtTime(400, now); 
                        osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.linearRampToValueAtTime(0.01, now + 0.1);
                        osc.start(now); 
                        osc.stop(now + 0.1); 
                    },
                    correct: () => { 
                        osc.type = 'sine'; 
                        osc.frequency.setValueAtTime(523.25, now);
                        osc.frequency.setValueAtTime(659.25, now + 0.1);
                        gain.gain.setValueAtTime(0.05, now);
                        gain.gain.linearRampToValueAtTime(0.2, now + 0.1);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.4);
                        osc.start(now); 
                        osc.stop(now + 0.4); 
                    },
                    bonus: () => { 
                        osc.type = 'square';
                        osc.frequency.setValueAtTime(800, now);
                        osc.frequency.setValueAtTime(1200, now + 0.1);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                        osc.start(now);
                        osc.stop(now + 0.3);
                    },
                    wrong: () => { 
                        osc.type = 'triangle'; 
                        osc.frequency.setValueAtTime(150, now); 
                        osc.frequency.linearRampToValueAtTime(100, now + 0.2);
                        gain.gain.setValueAtTime(0.15, now);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                        osc.start(now); 
                        osc.stop(now + 0.3); 
                    },
                    win: () => { 
                        osc.type = 'sine'; 
                        osc.frequency.setValueAtTime(400, now); 
                        osc.frequency.linearRampToValueAtTime(800, now + 0.3);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.linearRampToValueAtTime(0.3, now + 0.2);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.6);
                        osc.start(now); 
                        osc.stop(now + 0.6); 
                    },
                    pop: () => { 
                        osc.type = 'sine'; 
                        osc.frequency.setValueAtTime(800, now); 
                        osc.frequency.exponentialRampToValueAtTime(1200, now + 0.05);
                        gain.gain.setValueAtTime(0.1, now);
                        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                        osc.start(now); 
                        osc.stop(now + 0.05); 
                    }
                };

                if(sounds[type]) sounds[type]();
            } catch(e) { }
        };

        // --- UI COMPONENTS ---
        const Button = ({ children, onClick, variant="primary", className="", ...props }) => {
            const styles = {
                primary: `bg-indigo-600 border-b-4 border-indigo-800 text-white active:border-b-0 active:translate-y-1 hover:bg-indigo-500`,
                success: `bg-emerald-500 border-b-4 border-emerald-700 text-white active:border-b-0 active:translate-y-1`,
                error: `bg-rose-500 border-b-4 border-rose-800 text-white active:border-b-0 active:translate-y-1`,
                neutral: "bg-slate-700 border-b-4 border-slate-900 text-slate-200 active:border-b-0 active:translate-y-1",
                ghost: "border-2 border-white/20 text-white hover:bg-white/10 active:scale-95"
            };
            return (
                <button 
                    onClick={(e) => { playSound('click'); onClick && onClick(e); }}
                    className={`px-6 py-4 rounded-xl font-bold transition-all shadow-lg flex items-center justify-center gap-2 select-none ${styles[variant]} ${className}`}
                    {...props}
                >
                    {children}
                </button>
            );
        };

        const MusicPlayer = ({ isInGame }) => {
            const [isPlaying, setIsPlaying] = useState(false);
            const [volume, setVolume] = useState(0.5);
            const [showSlider, setShowSlider] = useState(false);
            const audioRef = useRef(null);

            useEffect(() => {
                if (isInGame) {
                    setShowSlider(false);
                }
            }, [isInGame]);

            useEffect(() => {
                audioRef.current = document.getElementById('bgAudio');
                if (audioRef.current) {
                    audioRef.current.volume = volume;
                }
                const playPromise = audioRef.current.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        setIsPlaying(true);
                    }).catch(error => {
                        setIsPlaying(false);
                    });
                }
            }, []);

            const handleMusicButtonClick = () => {
                if (audioRef.current.paused) {
                    audioRef.current.play();
                    setIsPlaying(true);
                } else {
                    audioRef.current.pause();
                    setIsPlaying(false);
                }
                setShowSlider(!showSlider);
            };

            const handleVolumeChange = (e) => {
                const newVolume = parseFloat(e.target.value);
                setVolume(newVolume);
                if (audioRef.current) {
                    audioRef.current.volume = newVolume;
                }
            };

            return (
                <div className="fixed top-4 left-4 z-50 flex flex-col gap-2 items-start">
                    <button 
                        onClick={handleMusicButtonClick}
                        className={`rounded-full px-4 py-2 border flex items-center gap-2 transition-all duration-300 ${isPlaying ? 'bg-purple-600 border-purple-400 text-white shadow-[0_0_15px_rgba(147,51,234,0.5)]' : 'bg-black/40 border-white/20 text-white/60 hover:bg-black/60'}`}
                    >
                        <Icon name={isPlaying ? "Volume2" : "VolumeX"} size={18} />
                        <span className="text-xs font-bold hidden sm:inline">{isPlaying ? "ÿ™ÿ¥ÿ∫ŸäŸÑ" : "ÿ•ŸäŸÇÿßŸÅ"}</span>
                    </button>
                    
                    {showSlider && (
                        <div className="bg-black/60 backdrop-blur-sm border border-white/10 p-2 rounded-xl flex items-center gap-2 animate-fade-in">
                            <Icon name="Volume1" size={14} className="text-white/60" />
                            <input 
                                type="range" 
                                min="0" 
                                max="1" 
                                step="0.01" 
                                value={volume} 
                                onChange={handleVolumeChange}
                                className="volume-slider w-20"
                            />
                        </div>
                    )}
                </div>
            );
        };

        const Footer = () => (
            <div className="fixed bottom-0 left-0 w-full z-40 bg-slate-900/90 backdrop-blur-md border-t border-white/10 p-3 flex flex-wrap justify-center items-center gap-4 text-xs sm:text-sm shadow-[0_-5px_20px_rgba(0,0,0,0.5)]">
                 <div className="flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/5">
                    <span className="text-purple-400 font-bold uppercase tracking-wider">ÿßŸÑŸÖÿ∑Ÿàÿ± ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä</span>
                    <span className="flex items-center gap-1 text-white" dir="ltr">
                        <Icon name="Instagram" size={14} /> @eventplus.om
                    </span>
                </div>
                <div className="w-px h-4 bg-white/10 hidden sm:block"></div>
                <div className="flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/5">
                    <span className="text-pink-400 font-bold uppercase tracking-wider">ŸÑŸÑÿ∑ŸÑÿ® Ÿà ÿßŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±</span>
                    <span className="flex items-center gap-1 text-white" dir="ltr">
                        <Icon name="Phone" size={14} /> +968 77220363
                    </span>
                </div>
            </div>
        );

        // --- VIRTUAL KEYBOARD COMPONENT ---
        const VirtualKeyboard = ({ onChar, onDelete, onEnter, isVisible }) => {
            if (!isVisible) return null;

            const rows = [
                ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],
                ['ÿ∂', 'ÿµ', 'ÿ´', 'ŸÇ', 'ŸÅ', 'ÿ∫', 'ÿπ', 'Ÿá', 'ÿÆ', 'ÿ≠', 'ÿ¨', 'ÿØ'],
                ['ÿ¥', 'ÿ≥', 'Ÿä', 'ÿ®', 'ŸÑ', 'ÿß', 'ÿ™', 'ŸÜ', 'ŸÖ', 'ŸÉ', 'ÿ∑'],
                ['ÿ∞', 'ÿ¶', 'ÿ°', 'ÿ§', 'ÿ±', 'ŸÑÿß', 'Ÿâ', 'ÿ©', 'Ÿà', 'ÿ≤', 'ÿ∏'],
                ['SPACE', 'DEL', 'ENTER']
            ];

            return (
                <div className="absolute top-0 left-0 w-full bg-slate-900/95 border-b-2 border-purple-500/50 p-2 z-50 shadow-2xl backdrop-blur-md animate-slideDown">
                    <div className="flex flex-col gap-2 max-w-4xl mx-auto">
                        {rows.map((row, i) => (
                            <div key={i} className="flex justify-center gap-1">
                                {row.map((key) => {
                                    if (key === 'SPACE') return (
                                        <button key={key} onClick={() => onChar(' ')} className="h-12 flex-1 max-w-[200px] bg-slate-700 rounded-lg active:bg-purple-600 transition-colors text-white font-bold border border-white/10">
                                            ŸÖÿ≥ÿßŸÅÿ©
                                        </button>
                                    );
                                    if (key === 'DEL') return (
                                        <button key={key} onClick={onDelete} className="h-12 w-20 bg-red-900/50 rounded-lg active:bg-red-600 transition-colors text-white font-bold border border-white/10 flex items-center justify-center">
                                            <Icon name="Delete" size={20} />
                                        </button>
                                    );
                                    if (key === 'ENTER') return (
                                        <button key={key} onClick={onEnter} className="h-12 w-24 bg-green-600 rounded-lg active:bg-green-500 transition-colors text-white font-bold border border-white/10">
                                            ÿ™ÿ£ŸÉŸäÿØ
                                        </button>
                                    );
                                    return (
                                        <button key={key} onClick={() => onChar(key)} className="h-12 w-10 sm:w-12 bg-slate-700 rounded-lg active:bg-purple-600 transition-colors text-white font-bold text-lg border border-white/10 shadow-sm">
                                            {key}
                                        </button>
                                    );
                                })}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const LivesDisplay = ({ lives }) => (
            <div className="flex gap-1 bg-black/30 p-2 rounded-lg backdrop-blur-sm border border-white/10">
                {[...Array(3)].map((_, i) => (
                    <Icon 
                        key={i} 
                        name="Heart" 
                        size={20} 
                        className={`${i < lives ? 'text-red-500 fill-red-500' : 'text-gray-600'} transition-colors duration-300`} 
                    />
                ))}
            </div>
        );

        // --- HELPER ---
        const shuffleArray = (array) => {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        };

        // --- SUB-GAMES IMPLEMENTATIONS ---
        
        // --- NEW: MATH GAME ---
        const GameMath = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [problem, setProblem] = useState(null);
            const [timeLeft, setTimeLeft] = useState(20 * diff.timeFactor);
            const [streak, setStreak] = useState(0);

            const generateProblem = useCallback(() => {
                const range = diff.mathRange;
                const isAddition = Math.random() > 0.5;
                let n1 = Math.floor(Math.random() * range) + 1;
                let n2 = Math.floor(Math.random() * range) + 1;
                
                // Ensure no negative results for simplicity
                if (!isAddition && n1 < n2) [n1, n2] = [n2, n1];

                const ans = isAddition ? n1 + n2 : n1 - n2;
                
                // Generate wrong answers
                let wrong1 = ans + Math.floor(Math.random() * 5) + 1;
                let wrong2 = ans - Math.floor(Math.random() * 5) - 1;
                if (wrong2 < 0) wrong2 = ans + 2; 

                // Ensure uniqueness
                const options = shuffleArray([ans, wrong1, wrong2]);

                setProblem({ n1, n2, op: isAddition ? '+' : '-', ans, options });
            }, [diff]);

            useEffect(() => {
                generateProblem();
                const timer = setInterval(() => {
                    setTimeLeft(t => {
                        if(t <= 0) { clearInterval(timer); onEnd(); return 0; }
                        return t - 0.1;
                    });
                }, 100);
                return () => clearInterval(timer);
            }, [generateProblem]);

            const handleAnswer = (val) => {
                if (val === problem.ans) {
                    let pointsToAdd = 50;
                    const newStreak = streak + 1;
                    
                    if (newStreak >= 3) {
                         pointsToAdd = Math.floor(pointsToAdd * 1.5); 
                         playSound('bonus');
                    } else {
                        playSound('correct');
                    }
                    
                    onScore(pointsToAdd);
                    setStreak(newStreak);
                    generateProblem();
                    setTimeLeft(20 * diff.timeFactor);
                } else {
                    playSound('wrong');
                    onLifeLost();
                    setStreak(0);
                    generateProblem();
                }
            };

            if (!problem) return null;

            return (
                <div className="flex flex-col items-center justify-center h-full gap-8">
                     <div className="flex justify-between w-full px-8">
                        <div className="text-xl text-white/70">ÿßÿ≠ÿ≥ÿ® ÿ®ÿ≥ÿ±ÿπÿ©!</div>
                        <div className="flex gap-4">
                            {streak > 2 && <div className="text-green-400 font-bold animate-pulse">üî• x1.5</div>}
                            <div className="text-xl font-mono text-yellow-400">{Math.ceil(timeLeft)}ÿ´</div>
                        </div>
                    </div>
                    
                    <div className="flex items-center gap-4 text-7xl font-black text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]">
                        <span>{problem.n1}</span>
                        <span className="text-purple-400">{problem.op}</span>
                        <span>{problem.n2}</span>
                        <span className="text-white/50">=</span>
                        <span className="text-yellow-400">?</span>
                    </div>

                    <div className="grid grid-cols-3 gap-4 w-full px-4 mt-8">
                        {problem.options.map((opt, i) => (
                            <Button key={i} onClick={() => handleAnswer(opt)} variant="neutral" className="text-3xl h-24">
                                {opt}
                            </Button>
                        ))}
                    </div>
                </div>
            );
        };

        const GameQuiz = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [questions, setQuestions] = useState([]);
            const [qIdx, setQIdx] = useState(0);
            const [timeLeft, setTimeLeft] = useState(15 * diff.timeFactor);
            const [streak, setStreak] = useState(0); 

            useEffect(() => {
                const difficultyKey = diff.id;
                const pool = QUESTIONS_DB[difficultyKey] || QUESTIONS_DB.EASY; 

                const selectedQuestions = shuffleArray([...pool]).slice(0, 5).map(q => ({
                    ...q,
                    a: shuffleArray([...q.a]) 
                }));
                
                setQuestions(selectedQuestions);

                const timer = setInterval(() => {
                    setTimeLeft(t => { 
                        if(t <= 0) { clearInterval(timer); onEnd(); return 0; } 
                        return t - 0.1; 
                    });
                }, 100);
                return () => clearInterval(timer);
            }, [diff.id]);

            const handleAns = (ans) => {
                if(ans === questions[qIdx].c) {
                    playSound('correct');
                    
                    let pointsToAdd = diff.quizPoints;
                    const newStreak = streak + 1;
                    
                    if (newStreak === 2) {
                        pointsToAdd = Math.floor(pointsToAdd * 1.25);
                        playSound('bonus');
                    } else if (newStreak === 3) {
                        pointsToAdd = Math.floor(pointsToAdd * 1.50);
                        playSound('bonus');
                    } else if (newStreak >= 4) {
                        pointsToAdd = Math.floor(pointsToAdd * 2.0);
                        playSound('bonus');
                    }

                    onScore(pointsToAdd);
                    setStreak(newStreak);

                    if(qIdx < questions.length - 1) {
                        setQIdx(qIdx + 1);
                        setTimeLeft(15 * diff.timeFactor);
                    } else {
                        onEnd(); 
                    }
                } else {
                    playSound('wrong');
                    onLifeLost();
                    setStreak(0); 
                    
                    if(qIdx < questions.length - 1) {
                        setQIdx(qIdx + 1);
                        setTimeLeft(15 * diff.timeFactor);
                    } else { 
                        onEnd(); 
                    }
                }
            };

            if (questions.length === 0) return <div>ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...</div>;

            return (
                <div className="flex flex-col h-full justify-center space-y-6">
                    <div className="flex justify-between text-2xl font-bold px-4">
                        <span>ÿ≥ÿ§ÿßŸÑ {qIdx+1} / {questions.length}</span>
                        <div className="flex gap-4">
                            {streak > 1 && <span className="text-green-400 animate-pulse font-bold">x{streak >= 4 ? '2' : streak === 3 ? '1.5' : '1.25'}!</span>}
                            <span className="text-yellow-400">{Math.ceil(timeLeft)}ÿ´</span>
                        </div>
                    </div>
                    <div className="bg-white/10 p-8 rounded-2xl text-2xl font-bold text-center min-h-[120px] flex items-center justify-center border border-white/10">
                        {questions[qIdx].q}
                    </div>
                    <div className="grid grid-cols-1 gap-4">
                        {questions[qIdx].a.map((opt, i) => (
                            <Button key={i} onClick={() => handleAns(opt)} variant="neutral">{opt}</Button>
                        ))}
                    </div>
                </div>
            );
        };

        const GameReflex = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [grid, setGrid] = useState(Array(9).fill(null));
            const [active, setActive] = useState(null); 
            const [timeLeft, setTimeLeft] = useState(30);
            const timerRef = useRef(null);
            const mountedRef = useRef(true);
            const [streak, setStreak] = useState(0); 

            useEffect(() => {
                mountedRef.current = true;
                spawnTarget();
                const gameTimer = setInterval(() => { setTimeLeft(t => { if(t<=0) { onEnd(); return 0; } return t-1; }); }, 1000);
                return () => { mountedRef.current = false; clearInterval(gameTimer); clearTimeout(timerRef.current); };
            }, []);

            const spawnTarget = () => {
                if (!mountedRef.current) return;
                if(timerRef.current) clearTimeout(timerRef.current);
                
                const nextIndex = Math.floor(Math.random() * 9);
                const nextType = Math.random() > 0.3 ? 'TARGET' : 'BOMB';
                
                setActive({ index: nextIndex, type: nextType });
                
                const duration = 1000 / diff.speedFactor;
                
                timerRef.current = setTimeout(() => { 
                    if (mountedRef.current) {
                        setActive(null); 
                        setTimeout(spawnTarget, 200);
                    }
                }, duration); 
            };

            const handleClick = (idx) => {
                if (!active || idx !== active.index) return; 

                if(active.type === 'TARGET') {
                    let pointsToAdd = 20; 
                    const newStreak = streak + 1;

                    if (newStreak === 3) {
                         pointsToAdd = Math.floor(pointsToAdd * 1.5); 
                         playSound('bonus');
                    } else if (newStreak > 3) {
                         pointsToAdd = Math.floor(pointsToAdd * 2.0); 
                         playSound('bonus');
                    } else {
                        playSound('pop');
                    }
                    
                    onScore(pointsToAdd);
                    setStreak(newStreak);
                    
                    setActive(null);
                    spawnTarget(); 
                } else if (active.type === 'BOMB') {
                    playSound('wrong'); 
                    onLifeLost();
                    setStreak(0); 
                    setActive(null);
                    spawnTarget();
                }
            };

            return (
                <div className="flex flex-col items-center justify-center h-full">
                    <div className="flex justify-between w-full px-4 mb-4">
                         <div className="text-3xl font-mono text-yellow-400">{timeLeft}ÿ´</div>
                         {streak > 2 && <div className="text-green-400 font-bold animate-pulse">üî• x{streak > 3 ? '2' : '1.5'}</div>}
                    </div>
                    <div className="grid grid-cols-3 gap-3 bg-white/5 p-4 rounded-2xl border border-white/10">
                        {[...Array(9)].map((_, i) => (
                            <button 
                                key={i} 
                                onClick={() => handleClick(i)} 
                                className={`w-24 h-24 rounded-xl transition-all duration-75 flex items-center justify-center bg-slate-800 scale-95 border border-white/5 overflow-hidden`}
                            >
                                {active && active.index === i && (
                                    <div className={`animate-bounceIn w-full h-full flex items-center justify-center`}>
                                        {active.type === 'TARGET' ? (
                                            <div className="w-16 h-16 bg-green-500 rounded-lg shadow-[0_0_15px_rgba(34,197,94,0.8)] border-4 border-green-300 animate-pulse"></div>
                                        ) : (
                                            <div className="relative w-16 h-16 bg-red-600 rounded-full flex items-center justify-center shadow-[0_0_15px_rgba(220,38,38,0.8)] border-4 border-red-400">
                                                <Icon name="Bomb" size={32} className="text-black drop-shadow-sm absolute" />
                                            </div>
                                        )}
                                    </div>
                                )}
                            </button>
                        ))}
                    </div>
                    <div className="mt-4 text-center text-sm opacity-60">
                        <p>ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑŸÖÿ±ÿ®ÿπ ÿßŸÑÿ£ÿÆÿ∂ÿ± <span className="text-green-400">‚ñ†</span></p>
                        <p>ÿ™ÿ¨ŸÜÿ® ÿßŸÑŸÇŸÜÿßÿ®ŸÑ <Icon name="Bomb" size={14} className="inline text-red-500"/>!</p>
                    </div>
                </div>
            );
        };

        const GameColor = ({ diff, onScore, onEnd, onLifeLost }) => {
            const COLORS = [{ n: 'ÿ£ÿ≠ŸÖÿ±', h: 'text-red-500', v: 'red' }, { n: 'ÿ£ÿ≤ÿ±ŸÇ', h: 'text-blue-500', v: 'blue' }, { n: 'ÿ£ÿÆÿ∂ÿ±', h: 'text-green-500', v: 'green' }, { n: 'ÿ£ÿµŸÅÿ±', h: 'text-yellow-500', v: 'yellow' }];
            const [current, setCurrent] = useState({ text: '', color: '', match: false });
            const [timeLeft, setTimeLeft] = useState(20);
            const [streak, setStreak] = useState(0);

            useEffect(() => {
                nextRound();
                const t = setInterval(() => setTimeLeft(prev => { if(prev <= 0) { onEnd(); return 0; } return prev - 1; }), 1000);
                return () => clearInterval(t);
            }, []);

            const nextRound = () => {
                const tO = COLORS[Math.floor(Math.random() * 4)];
                const cO = COLORS[Math.floor(Math.random() * 4)];
                const isMatch = Math.random() > 0.5;
                if (isMatch) setCurrent({ text: tO.n, color: tO.h, match: true });
                else {
                    let fC = cO; while(fC.n === tO.n) fC = COLORS[Math.floor(Math.random() * 4)];
                    setCurrent({ text: tO.n, color: fC.h, match: false });
                }
            };

            const handleChoice = (c) => {
                let pointsToAdd = 30; 
                const newStreak = streak + 1;

                if (c === current.match) { 
                    
                    if (newStreak === 3) {
                         pointsToAdd = Math.floor(pointsToAdd * 1.5); 
                         playSound('bonus');
                    } else if (newStreak > 3) {
                         pointsToAdd = Math.floor(pointsToAdd * 2.0); 
                         playSound('bonus');
                    } else {
                        playSound('correct'); 
                    }

                    onScore(pointsToAdd); 
                    setStreak(newStreak);
                } else { 
                    playSound('wrong'); 
                    onLifeLost();
                    setStreak(0);
                }
                nextRound();
            };

            return (
                <div className="flex flex-col items-center justify-center h-full gap-8">
                    <div className="flex justify-between w-full px-8">
                        <div className="text-xl text-white/70">ŸáŸÑ ÿ™ÿ∑ÿßÿ®ŸÇ ÿßŸÑŸÉŸÑŸÖÿ© ÿßŸÑŸÑŸàŸÜÿü</div>
                        {streak > 2 && <div className="text-green-400 font-bold animate-pulse">üî• x{streak > 3 ? '2' : '1.5'}</div>}
                    </div>
                    <div className={`text-6xl font-black ${current.color} drop-shadow-[0_0_15px_rgba(255,255,255,0.3)] scale-150`}>{current.text}</div>
                    <div className="text-2xl font-mono text-yellow-400">{timeLeft}ÿ´</div>
                    <div className="flex gap-4 w-full px-8">
                        <Button onClick={() => handleChoice(true)} variant="success" className="flex-1">ÿµÿ≠</Button>
                        <Button onClick={() => handleChoice(false)} variant="error" className="flex-1">ÿÆÿ∑ÿ£</Button>
                    </div>
                </div>
            );
        };

        // --- MAIN ENGINE ---
        const GameEngine = ({ gameId, difficulty, onExit, onAutoSave, onViewLeaderboard, onHome }) => {
            const [score, setScore] = useState(0);
            const [isOver, setIsOver] = useState(false);
            const [lives, setLives] = useState(3);
            const config = DIFFICULTY_CONFIG[difficulty];
            const gameData = GAMES_LIST.find(g => g.id === gameId);

            useEffect(() => {
                if (isOver) {
                    onAutoSave(score);
                    playSound('win'); 
                }
            }, [isOver]);

            const handleScore = useCallback((pts) => {
                const finalPts = pts > 1000 ? pts : Math.floor(pts * config.multiplier);
                setScore(s => Math.max(0, s + finalPts));
            }, [config]);

            const handleLifeLost = () => {
                setLives(prev => {
                    const newLives = prev - 1;
                    if(newLives <= 0) {
                        handleEnd();
                        return 0;
                    }
                    return newLives;
                });
            };

            const handleEnd = () => { 
                setIsOver(true); 
            };

            if (isOver) {
                return (
                    <div key="result" className="flex flex-col items-center justify-center h-full animate-float space-y-6">
                        {lives <= 0 ? (
                            <Icon name="Skull" size={80} className="text-red-500 drop-shadow-[0_0_20px_rgba(239,68,68,0.6)]" />
                        ) : (
                            <Icon name="Trophy" size={80} className="text-yellow-400 drop-shadow-[0_0_20px_rgba(250,204,21,0.6)]" />
                        )}
                        <h2 className="text-4xl font-bold">{lives <= 0 ? 'ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÑÿπÿ®ÿ©!' : 'ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©'}</h2>
                        <div className="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 drop-shadow-sm">
                            {score}
                        </div>
                        <div className="bg-white/10 px-4 py-2 rounded-lg border border-white/10">ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ: {config.label}</div>
                        
                        <div className="flex flex-col w-64 gap-3">
                            <Button onClick={onViewLeaderboard} variant="success" className="w-full">
                                <Icon name="List" size={20} /> ŸÑŸàÿ≠ÿ© ÿßŸÑÿµÿØÿßÿ±ÿ©
                            </Button>
                            <Button onClick={() => onHome(score)} variant="error" className="w-full">
                                 <Icon name="LogOut" size={20} /> ÿÆÿ±Ÿàÿ¨ Ÿàÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿßÿ≥ŸÖ
                            </Button>
                        </div>
                    </div>
                );
            }

            const props = { 
                diff: config, 
                onScore: handleScore, 
                onEnd: handleEnd,
                onLifeLost: handleLifeLost 
            };

            return (
                <div key="game" className="h-full w-full max-w-lg mx-auto p-4 flex flex-col pb-16">
                    <div className="flex justify-between items-center mb-4 bg-slate-800/80 backdrop-blur p-3 rounded-xl border border-white/10 shadow-lg">
                        <div className="flex gap-2">
                            <Button onClick={handleEnd} variant="ghost" className="px-3 py-1 text-xs h-8">ÿ•ŸÜŸáÿßÿ°</Button>
                            {gameData?.hasLives && <LivesDisplay lives={lives} />}
                        </div>
                        <div className="font-bold text-xl font-mono text-purple-300">{score} <span className="text-xs text-white/50">XP</span></div>
                        <div className={`px-2 py-1 rounded text-xs border ${config.border} ${config.color}`}>{config.label}</div>
                    </div>
                    <div className={`flex-1 bg-slate-900/50 rounded-2xl border border-white/5 relative overflow-hidden p-2 shadow-inner ${lives <= 0 ? 'animate-shake' : ''}`}>
                        {gameId === 'QUIZ' && <GameQuiz {...props} />}
                        {gameId === 'REFLEX' && <GameReflex {...props} />}
                        {gameId === 'COLOR' && <GameColor {...props} />}
                        {gameId === 'MATH' && <GameMath {...props} />}
                    </div>
                </div>
            );
        };

        // --- LEADERBOARD SCREEN ---
        const LeaderboardScreen = ({ onBack, currentName }) => {
            const [data, setData] = useState([]);
            
            useEffect(() => {
                const saved = localStorage.getItem('eventPlusLeaderboardAR');
                if (saved) {
                    const parsedData = JSON.parse(saved);
                    setData(parsedData);
                }
            }, []);

            return (
                <div className={`h-full flex flex-col ${THEME.gradient} p-6 relative overflow-hidden pb-16`}>
                     <div className="absolute inset-0 crt-scanline opacity-30"></div>
                     <div className="relative z-10 flex flex-col h-full max-w-2xl mx-auto w-full">
                        <div className="flex justify-between items-center mb-8">
                            <h2 className="text-3xl font-bold flex items-center gap-3">
                                <Icon name="Trophy" className="text-yellow-400" />
                                <span>ŸÑŸàÿ≠ÿ© ÿßŸÑÿµÿØÿßÿ±ÿ©</span>
                            </h2>
                            <Button onClick={onBack} variant="ghost" className="p-2 rounded-full"><Icon name="X" /></Button>
                        </div>

                        <div className="flex justify-center items-center mb-4 text-white/70">
                            <Icon name="Users" size={18} className="mr-2" />
                            <span>ÿßŸÑŸÖÿ¥ÿßÿ±ŸÉŸäŸÜ: {data.length}</span>
                        </div>

                        <div className="flex-1 bg-slate-800/50 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden shadow-2xl">
                            <div className="grid grid-cols-4 bg-indigo-900/50 p-4 font-bold text-indigo-200 uppercase tracking-wider text-sm border-b border-indigo-500/30">
                                <span className="text-center">#</span>
                                <span className="col-span-2">ÿßŸÑŸÑÿßÿπÿ®</span>
                                <span className="text-left">ÿßŸÑŸÜŸÇÿßÿ∑</span>
                            </div>
                            <div className="overflow-y-auto max-h-[60vh] no-scrollbar">
                                {data.length === 0 ? (
                                    <div className="p-12 text-center text-white/30 flex flex-col items-center gap-4">
                                        <Icon name="Ghost" size={48} />
                                        <span>ŸÑÿß ŸäŸàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨ ÿ®ÿπÿØ.. ŸÉŸÜ ÿßŸÑÿ£ŸàŸÑ!</span>
                                    </div>
                                ) : (
                                    data.map((entry, idx) => {
                                        const isCurrentUser = entry.id === localStorage.getItem('currentSessionId');
                                        return (
                                            <div key={idx} className={`grid grid-cols-4 p-4 border-b border-white/5 items-center hover:bg-white/5 transition-colors ${isCurrentUser ? 'bg-indigo-500/20 border-l-4 border-l-indigo-400' : ''}`}>
                                                <div className="flex justify-center">
                                                    {idx < 3 ? (
                                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold shadow-lg ${idx===0?'bg-yellow-400 text-black shadow-yellow-500/50': idx===1?'bg-slate-300 text-black': 'bg-amber-700 text-white'}`}>
                                                            {idx+1}
                                                        </div>
                                                    ) : <span className="text-white/40 font-mono">#{idx+1}</span>}
                                                </div>
                                                <div className="col-span-2 font-bold text-lg truncate flex items-center gap-2">
                                                    {entry.name}
                                                    {isCurrentUser && <span className="text-[10px] bg-indigo-500 px-1 rounded text-white">ÿ£ŸÜÿ™</span>}
                                                </div>
                                                <div className="text-left font-mono text-xl text-emerald-400 font-bold">{entry.score}</div>
                                            </div>
                                        );
                                    })
                                )}
                            </div>
                        </div>
                     </div>
                </div>
            );
        };

        // --- APP ORCHESTRATOR ---
        const App = () => {
            const [screen, setScreen] = useState('START');
            const [name, setName] = useState('');
            const [diff, setDiff] = useState('MEDIUM');
            const [showKeyboard, setShowKeyboard] = useState(false);
            const [activeGame, setActiveGame] = useState(null);
            
            // --- FULLSCREEN LOGIC ---
            const [tapCount, setTapCount] = useState(0);
            const tapTimeoutRef = useRef(null);

            const handleSecretTap = () => {
                setTapCount(prev => prev + 1);
                
                // Clear existing timeout
                if (tapTimeoutRef.current) clearTimeout(tapTimeoutRef.current);
                
                // Reset count if no tap for 2 seconds
                tapTimeoutRef.current = setTimeout(() => {
                    setTapCount(0);
                }, 2000);
            };

            useEffect(() => {
                if (tapCount === 5) {
                    // Try to enter fullscreen
                    const elem = document.documentElement;
                    if (elem.requestFullscreen) {
                        elem.requestFullscreen().catch(err => console.log(err));
                    } else if (elem.webkitRequestFullscreen) { /* Safari */
                        elem.webkitRequestFullscreen();
                    }
                } else if (tapCount === 9) {
                    // Exit fullscreen
                    if (document.exitFullscreen) {
                        document.exitFullscreen().catch(err => console.log(err));
                    } else if (document.webkitExitFullscreen) { /* Safari */
                        document.webkitExitFullscreen();
                    }
                    setTapCount(0); // Reset after exit
                }
            }, [tapCount]);
            // ------------------------

            const saveDataInternal = (finalScore) => {
                const sessionId = Date.now().toString();
                localStorage.setItem('currentSessionId', sessionId);

                const newEntry = {
                    id: sessionId, 
                    name: name || "ŸÑÿßÿπÿ® ŸÖÿ¨ŸáŸàŸÑ",
                    score: finalScore,
                    date: new Date().toISOString()
                };
                const saved = localStorage.getItem('eventPlusLeaderboardAR');
                let list = saved ? JSON.parse(saved) : [];
                list.push(newEntry);
                list.sort((a, b) => b.score - a.score);
                list = list.slice(0, 50);
                localStorage.setItem('eventPlusLeaderboardAR', JSON.stringify(list));
            };

            const handleAutoSave = (finalScore) => {
                saveDataInternal(finalScore);
            };

            const handleViewLeaderboard = () => {
                setScreen('LEADERBOARD');
            };

            const resetGame = () => {
                setScreen('START');
                setName('');
            };

            const handleKeyChar = (char) => {
                if (char === ' ') {
                    if (name.length < 15) setName(prev => prev + ' ');
                } else {
                    if (name.length < 15) setName(prev => prev + char);
                }
            };
            const handleKeyDelete = () => {
                setName(prev => prev.slice(0, -1));
            };
            const handleKeyEnter = () => {
                setShowKeyboard(false);
            };

            return (
                <div className="h-full relative">
                    {/* HIDDEN SECRET BUTTON FOR FULLSCREEN (Top Right Corner) */}
                    <div 
                        onClick={handleSecretTap}
                        className="fixed top-0 right-0 w-16 h-16 z-[100] cursor-default"
                        style={{ backgroundColor: 'transparent' }} 
                        aria-hidden="true"
                    ></div>

                    {/* Pass state to MusicPlayer to control auto-hide */}
                    <MusicPlayer isInGame={screen === 'GAME'} />
                    
                    {screen === 'START' && (
                        <div className={`h-full flex flex-col items-center justify-center ${THEME.gradient} p-6 text-center space-y-8 relative pb-16`}>
                            <div className="absolute inset-0 crt-scanline"></div>
                            <div className="mb-8 relative flex justify-center animate-float">
                                <div className="absolute -inset-8 bg-purple-500 rounded-full blur-2xl opacity-20 animate-pulse"></div>
                                <svg viewBox="0 0 200 200" className="w-56 h-56 relative z-10 drop-shadow-[0_0_35px_rgba(139,92,246,0.6)]" xmlns="http://www.w3.org/2000/svg">
                                    <defs>
                                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                                            <stop offset="0%" stopColor="#c084fc" />
                                            <stop offset="50%" stopColor="#a855f7" />
                                            <stop offset="100%" stopColor="#6366f1" />
                                        </linearGradient>
                                        <filter id="neonGlow" height="300%" width="300%" x="-75%" y="-75%">
                                            <feGaussianBlur stdDeviation="5" result="coloredBlur" />
                                            <feMerge>
                                                <feMergeNode in="coloredBlur" />
                                                <feMergeNode in="SourceGraphic" />
                                            </feMerge>
                                        </filter>
                                    </defs>
                                    <path d="M100 10 L186.6 60 V160 L100 210 L13.4 160 V60 Z" fill="none" stroke="url(#logoGrad)" strokeWidth="4" opacity="0.3" transform="scale(0.9) translate(11,11)" />
                                    <path d="M100 25 L165 62.5 V137.5 L100 175 L35 137.5 V62.5 Z" fill="rgba(168, 85, 247, 0.1)" stroke="url(#logoGrad)" strokeWidth="6" strokeLinejoin="round" filter="url(#neonGlow)" />
                                    <circle cx="130" cy="100" r="12" fill="url(#logoGrad)" opacity="0.8" />
                                    <circle cx="70" cy="100" r="12" fill="url(#logoGrad)" opacity="0.8" />
                                    <circle cx="100" cy="70" r="8" fill="white" opacity="0.5" />
                                    <path d="M100 110 L115 135 H85 Z" fill="white" opacity="0.9" filter="url(#neonGlow)" /> 
                                    <path d="M100 25 V45 M100 175 V155 M35 100 H55 M165 100 H145" stroke="white" strokeWidth="2" opacity="0.5" strokeLinecap="round" />
                                </svg>
                            </div>
                            <div>
                                <h2 className="text-xl text-purple-300 tracking-[0.5em] uppercase mb-2">ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ™ÿ≠ÿØŸä</h2>
                                <h1 className="text-6xl font-black tracking-tighter">
                                    EVENT PLUS<br/>
                                    <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 drop-shadow-lg">GAMES</span>
                                </h1>
                            </div>
                            <div className="w-full max-w-sm space-y-4 relative z-20">
                                <div className="relative">
                                    <input 
                                        type="text" 
                                        placeholder="ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖŸÉ ŸÑŸÑŸÖŸÜÿßŸÅÿ≥ÿ©" 
                                        className="w-full bg-slate-800/80 border-2 border-white/10 rounded-xl p-5 text-center text-2xl font-bold focus:border-purple-500 focus:outline-none transition-all placeholder:text-white/20 shadow-xl"
                                        value={name}
                                        readOnly
                                        onClick={() => setShowKeyboard(true)}
                                    />
                                    {name && <Icon name="Check" className="absolute left-4 top-1/2 -translate-y-1/2 text-green-400" />}
                                </div>
                                <Button 
                                    onClick={() => name && setScreen('DIFFICULTY')} 
                                    disabled={!name}
                                    className={`w-full text-xl py-6 shadow-purple-900/50 ${!name ? 'opacity-50 grayscale' : 'animate-pulse'}`}
                                >
                                    <span className="ml-2">ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≠ÿØŸä</span> <Icon name="ChevronLeft" />
                                </Button>
                                <Button variant="ghost" onClick={() => setScreen('LEADERBOARD')} className="w-full border-none text-purple-300 hover:text-white">
                                     ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿµÿØÿßÿ±ÿ© <Icon name="Trophy" size={16} className="mr-2" />
                                </Button>
                            </div>
                            
                            <VirtualKeyboard 
                                isVisible={showKeyboard} 
                                onChar={handleKeyChar} 
                                onDelete={handleKeyDelete} 
                                onEnter={handleKeyEnter} 
                            />
                        </div>
                    )}

                    {screen === 'DIFFICULTY' && (
                        <div className={`h-full flex flex-col justify-center ${THEME.gradient} p-6 relative pb-16`}>
                            <div className="absolute inset-0 crt-scanline opacity-20"></div>
                            <Button variant="ghost" className="absolute top-6 right-6 w-12 h-12 rounded-full p-0" onClick={() => setScreen('START')}><Icon name="ArrowRight" /></Button>
                            
                            <h2 className="text-3xl font-bold text-center mb-10 drop-shadow-md">ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿµÿπŸàÿ®ÿ©</h2>
                            <div className="grid gap-6 max-w-md mx-auto w-full">
                                {Object.values(DIFFICULTY_CONFIG).map((d) => (
                                    <button
                                        key={d.id}
                                        onClick={() => { setDiff(d.id); setScreen('MENU'); playSound('click'); }}
                                        className={`relative p-8 rounded-2xl border-2 transition-all duration-300 hover:scale-105 active:scale-95 text-right overflow-hidden group ${d.border} bg-slate-800/80 backdrop-blur shadow-xl`}
                                    >
                                        <div className="flex justify-between items-center mb-2">
                                            <div className={`text-3xl font-black ${d.color}`}>{d.label}</div>
                                            <Icon name={d.id === 'EASY' ? 'Smile' : d.id === 'MEDIUM' ? 'Zap' : 'Skull'} className={d.color} size={32} />
                                        </div>
                                        <div className="text-sm text-white/60 font-mono">ŸÜŸÇÿßÿ∑ x{d.multiplier} | ÿ≥ÿ±ÿπÿ© {Math.floor(d.speedFactor*100)}%</div>
                                        <div className={`absolute right-0 top-0 h-full w-2 ${d.color.replace('text', 'bg')}`}></div>
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    {screen === 'MENU' && (
                        <div className={`h-full flex flex-col ${THEME.gradient} p-4 overflow-hidden relative pb-16`}>
                            <div className="absolute inset-0 crt-scanline opacity-10"></div>
                            <div className="flex justify-between items-center mb-6 px-2 pt-2 z-10">
                                <div className="flex flex-col">
                                    <h2 className="text-xl font-bold text-white/90">ŸÖÿ±ÿ≠ÿ®ÿßÿå <span className="text-purple-400 border-b-2 border-purple-500/50">{name}</span></h2>
                                    <span className={`text-[10px] mt-1 self-start px-2 py-0.5 rounded border ${DIFFICULTY_CONFIG[diff].border} ${DIFFICULTY_CONFIG[diff].color} bg-slate-900`}>{DIFFICULTY_CONFIG[diff].label}</span>
                                </div>
                                <Button variant="ghost" className="w-12 h-12 rounded-full p-0 bg-white/5" onClick={() => setScreen('START')}><Icon name="LogOut" size={20} /></Button>
                            </div>
                            <div className="flex-1 overflow-y-auto no-scrollbar pb-24 z-10">
                                <div className="grid grid-cols-2 gap-4">
                                    {GAMES_LIST.map(g => (
                                        <button
                                            key={g.id}
                                            onClick={() => { setActiveGame(g.id); setScreen('GAME'); playSound('click'); }}
                                            className="group relative h-40 rounded-3xl overflow-hidden transition-all duration-300 transform hover:scale-[1.02] active:scale-95 border border-white/10 hover:border-purple-400/50 shadow-lg hover:shadow-[0_0_20px_rgba(168,85,247,0.3)] bg-slate-800"
                                        >
                                            <div className={`absolute inset-0 bg-gradient-to-br ${g.color} opacity-10 group-hover:opacity-20 transition-opacity`}></div>
                                            <div className="absolute inset-0 flex flex-col items-center justify-center gap-3 p-4 z-10">
                                                <div className="p-3 bg-slate-900/50 rounded-2xl backdrop-blur-sm group-hover:bg-slate-900/80 transition-colors shadow-inner border border-white/5">
                                                    <Icon name={g.icon} size={32} className="text-white drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]" />
                                                </div>
                                                <div className="text-center">
                                                    <div className="font-bold text-lg text-white drop-shadow-md">{g.name}</div>
                                                    <div className="text-[10px] text-white/50 font-medium tracking-wide mt-1">{g.desc}</div>
                                                </div>
                                            </div>
                                            {g.hasLives && (
                                                <div className="absolute top-2 right-2 flex gap-0.5">
                                                    <Icon name="Heart" size={12} className="text-red-500 fill-red-500" />
                                                    <Icon name="Heart" size={12} className="text-red-500 fill-red-500" />
                                                    <Icon name="Heart" size={12} className="text-red-500 fill-red-500" />
                                                </div>
                                            )}
                                            <div className="absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"></div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}

                    {screen === 'GAME' && (
                        <div key={activeGame} className={`h-full ${THEME.gradient}`}>
                            <GameEngine 
                                gameId={activeGame} 
                                difficulty={diff} 
                                onExit={() => setScreen('MENU')} 
                                onAutoSave={handleAutoSave}
                                onViewLeaderboard={handleViewLeaderboard}
                                onHome={resetGame} 
                            />
                        </div>
                    )}

                    {screen === 'LEADERBOARD' && (
                        <LeaderboardScreen 
                            onBack={resetGame} 
                            currentName={name} 
                        />
                    )}

                    {/* Persistent Footer */}
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
