<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Event Plus - ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ù‡Ø±Ø¬Ø§Ù†</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
	{
    touch-action: manipulation;
}
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap');

        body { 
            touch-action: none; 
            overflow: hidden; 
            user-select: none; 
            -webkit-user-select: none; 
            font-family: 'Tajawal', sans-serif;
            background-color: #0f0518;
        }
        
        /* --- BACKGROUNDS --- */
        .bg-hero-container {
            position: absolute; inset: 0; z-index: -2;
            background-color: #0f0518; overflow: hidden;
        }
        .hero-orb {
            position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.5;
            animation: orbFloat 10s infinite ease-in-out alternate;
        }
        .orb-1 { top: -10%; left: -10%; width: 70vw; height: 70vw; background: radial-gradient(circle, #6d28d9 0%, transparent 70%); animation-duration: 12s; }
        .orb-2 { bottom: -20%; right: -10%; width: 60vw; height: 60vw; background: radial-gradient(circle, #1d4ed8 0%, transparent 70%); animation-duration: 15s; animation-delay: -5s; }
        .bg-hero-grid {
            position: absolute; inset: 0; z-index: -1;
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px; mask-image: radial-gradient(circle at center, black 60%, transparent 100%);
        }
        @keyframes orbFloat { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(20px, 40px) scale(1.05); } }

        /* --- METEORS --- */
        .bg-meteor-container {
            position: absolute; inset: 0; background: linear-gradient(135deg, #1a0b2e 0%, #000000 100%); overflow: hidden; z-index: -2;
        }
        .meteor {
            position: absolute; width: 100px; height: 2px;
            background: linear-gradient(90deg, #ffffff, #a855f7, transparent); opacity: 0;
            filter: drop-shadow(0 0 5px rgba(168, 85, 247, 0.8)); transform: rotate(-45deg); z-index: -1;
        }
        @keyframes meteorFall {
            0% { opacity: 1; transform: translate(50px, -50px) rotate(-45deg); }
            100% { opacity: 0; transform: translate(-100vw, 100vh) rotate(-45deg); }
        }

        /* --- GAME BG --- */
        .bg-game-deep {
            background: radial-gradient(circle at center, #1e1b4b 0%, #000000 100%); position: absolute; inset: 0; z-index: -2;
        }
        .particle {
            position: absolute; background: rgba(168, 85, 247, 0.2); border-radius: 50%;
            animation: floatParticle 20s infinite linear;
        }
        @keyframes floatParticle { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-100vh); opacity: 0; } }

        /* --- UTILS --- */
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }
        .glass-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        .glass-input:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: #a855f7;
            box-shadow: 0 0 15px rgba(168, 85, 247, 0.2);
        }
        
        .animate-float { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-15px); } 100% { transform: translateY(0px); } }
        
        .crt-scanline {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 3px, 3px 100%; pointer-events: none; z-index: 50; position: absolute; inset: 0; opacity: 0.15;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #a855f7; cursor: pointer; margin-top: -6px; box-shadow: 0 0 10px rgba(168,85,247,0.8); }
        input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: rgba(255,255,255,0.2); border-radius: 2px; }
        
        .animate-slideDown { animation: slideDown 0.4s ease-out forwards; }
        .animate-slideUp { animation: slideUp 0.5s ease-out forwards; }
        @keyframes slideDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-[#0f0518] text-white h-screen w-screen overflow-hidden">

    <div id="root" class="h-full w-full"></div>

    <audio id="bgAudio" loop>
        <source src="sound/1.mp3" type="audio/mpeg">
    </audio>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback, useMemo } = React;

        const Icon = ({ name, size = 24, className, ...props }) => {
            if (!window.lucide || !window.lucide.icons) return null;
            const iconData = window.lucide.icons[name];
            if (!iconData) return null;
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                    {iconData.map((child, idx) => React.createElement(child[0], { key: idx, ...child[1] }))}
                </svg>
            );
        };

        const AUDIO_SETTINGS = { sfxOn: true, musicOn: true };

        // --- CONFIG ---
        const DIFFICULTY_CONFIG = {
            EASY: { 
                id: 'EASY', label: 'Ù…Ø¨ØªØ¯Ø¦', subLabel: 'Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø±Ø­Ù„Ø©', icon: 'Sparkles',
                multiplier: 1, timeFactor: 1.0, speedFactor: 1.0, 
                color: 'text-emerald-400', bgGradient: 'from-emerald-900/40 to-emerald-900/10', border: 'border-emerald-500/30', glow: 'shadow-emerald-500/20',
                mathRange: 10, gamePoints: { REFLEX: 30, COLOR: 50, MATH: 80, QUIZ: 550 }, timeBonus: { MATH: 5, COLOR: 2, REFLEX: 0 }
            },
            MEDIUM: { 
                id: 'MEDIUM', label: 'Ù…ØªÙˆØ³Ø·', subLabel: 'Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ', icon: 'Zap',
                multiplier: 1.5, timeFactor: 0.66, speedFactor: 1.5, 
                color: 'text-amber-400', bgGradient: 'from-amber-900/40 to-amber-900/10', border: 'border-amber-500/30', glow: 'shadow-amber-500/20',
                mathRange: 50, gamePoints: { REFLEX: 50, COLOR: 50, MATH: 100, QUIZ: 650 }, timeBonus: { MATH: 3, COLOR: 1.5, REFLEX: 0 }
            },
            HARD: { 
                id: 'HARD', label: 'ØµØ¹Ø¨', subLabel: 'Ù„Ù„Ù…Ø­ØªØ±ÙÙŠÙ† ÙÙ‚Ø·', icon: 'Flame',
                multiplier: 2, timeFactor: 0.5, speedFactor: 2.0, 
                color: 'text-rose-500', bgGradient: 'from-rose-900/40 to-rose-900/10', border: 'border-rose-500/30', glow: 'shadow-rose-500/20',
                mathRange: 99, gamePoints: { REFLEX: 60, COLOR: 50, MATH: 120, QUIZ: 750 }, timeBonus: { MATH: 2, COLOR: 1, REFLEX: 0 }
            }
        };

        const GAMES_LIST = [
            { id: 'REFLEX', name: 'Ø±Ø¯ Ø§Ù„ÙØ¹Ù„', icon: 'MousePointer2', desc: 'ØªØ¬Ù†Ø¨ Ø§Ù„Ù‚Ù†Ø§Ø¨Ù„ Ø¨Ø³Ø±Ø¹Ø©!', color: 'from-red-500 to-rose-700', border: 'group-hover:border-red-500', shadow: 'hover:shadow-red-500/50', hasLives: true },
            { id: 'MATH', name: 'ØªØ­Ø¯ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨', icon: 'Calculator', desc: 'Ø§Ø¬Ù…Ø¹ ÙˆØ§Ø·Ø±Ø­ Ù‚Ø¨Ù„ Ø§Ù„ÙˆÙ‚Øª', color: 'from-cyan-500 to-blue-700', border: 'group-hover:border-cyan-500', shadow: 'hover:shadow-cyan-500/50', hasLives: true },
            { id: 'COLOR', name: 'Ø®Ø¯Ø§Ø¹ Ø§Ù„Ø£Ù„ÙˆØ§Ù†', icon: 'Palette', desc: 'Ù„Ø§ ØªØ¯Ø¹ Ø¹ÙŠÙ†Ùƒ ØªØ®Ø¯Ø¹Ùƒ', color: 'from-pink-500 to-fuchsia-700', border: 'group-hover:border-pink-500', shadow: 'hover:shadow-pink-500/50', hasLives: true },
            { id: 'QUIZ', name: 'Ø«Ù‚Ø§ÙØ© Ø¹Ù…Ø§Ù†', icon: 'Brain', desc: 'Ø§Ø®ØªØ¨Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø¹Ø§Ù…Ø©', color: 'from-blue-600 to-indigo-800', border: 'group-hover:border-blue-500', shadow: 'hover:shadow-blue-500/50', hasLives: true },
        ];

        const playSound = (type) => {
            if (!AUDIO_SETTINGS.sfxOn) return;
            try {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                if (!AudioContext) return;
                const ctx = new AudioContext();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.connect(gain);
                gain.connect(ctx.destination);
                const now = ctx.currentTime;
                const sounds = {
                    click: () => { osc.type = 'sine'; osc.frequency.setValueAtTime(400, now); osc.frequency.exponentialRampToValueAtTime(600, now + 0.1); gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0.01, now + 0.1); osc.start(now); osc.stop(now + 0.1); },
                    correct: () => { osc.type = 'sine'; osc.frequency.setValueAtTime(523.25, now); osc.frequency.setValueAtTime(659.25, now + 0.1); gain.gain.setValueAtTime(0.05, now); gain.gain.linearRampToValueAtTime(0.2, now + 0.1); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.4); osc.start(now); osc.stop(now + 0.4); },
                    bonus: () => { osc.type = 'square'; osc.frequency.setValueAtTime(800, now); osc.frequency.setValueAtTime(1200, now + 0.1); gain.gain.setValueAtTime(0.1, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3); osc.start(now); osc.stop(now + 0.3); },
                    wrong: () => { osc.type = 'triangle'; osc.frequency.setValueAtTime(150, now); osc.frequency.linearRampToValueAtTime(100, now + 0.2); gain.gain.setValueAtTime(0.15, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3); osc.start(now); osc.stop(now + 0.3); },
                    pop: () => { osc.type = 'sine'; osc.frequency.setValueAtTime(800, now); osc.frequency.exponentialRampToValueAtTime(1200, now + 0.05); gain.gain.setValueAtTime(0.1, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05); osc.start(now); osc.stop(now + 0.05); },
                    win: () => { osc.type = 'sine'; osc.frequency.setValueAtTime(400, now); osc.frequency.linearRampToValueAtTime(800, now + 0.3); gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0.3, now + 0.2); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.6); osc.start(now); osc.stop(now + 0.6); },
                    break: () => { osc.type = 'sawtooth'; osc.frequency.setValueAtTime(100, now); osc.frequency.exponentialRampToValueAtTime(20, now + 0.3); gain.gain.setValueAtTime(0.2, now); gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3); osc.start(now); osc.stop(now + 0.3); }
                };
                if(sounds[type]) sounds[type]();
            } catch(e) { }
        };

        const Button = ({ children, onClick, variant="primary", className="", ...props }) => {
            const styles = {
                primary: `bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-500 hover:to-violet-500 text-white shadow-lg shadow-indigo-500/30 border border-white/10 active:scale-[0.98]`,
                success: `bg-emerald-600 text-white active:scale-95`,
                error: `bg-rose-600 text-white active:scale-95`,
                neutral: "bg-slate-700 text-slate-200 active:scale-95",
                ghost: "bg-transparent text-purple-300 hover:text-white hover:bg-white/5 border border-white/10"
            };
            return (
                <button 
                    onClick={(e) => { playSound('click'); onClick && onClick(e); }}
                    className={`w-full py-4 rounded-xl font-bold transition-all duration-200 flex items-center justify-center gap-2 select-none ${styles[variant]} ${className}`}
                    {...props}
                >
                    {children}
                </button>
            );
        };

        const MusicController = ({ volume, setVolume, color="text-white" }) => (
            <div className="flex items-center gap-2 w-full">
                <Icon name="Volume1" size={16} className={color} />
                <input type="range" min="0" max="1" step="0.05" value={volume} onChange={(e) => setVolume(parseFloat(e.target.value))} className="flex-1" />
                <Icon name="Volume2" size={16} className={color} />
            </div>
        );

        const SettingsModal = ({ isOpen, onClose, audioSettings, setAudioSettings, globalVolume, setGlobalVolume }) => {
            const [confirmStep, setConfirmStep] = useState(false);
            const [inputValue, setInputValue] = useState("");
            
            if (!isOpen) return null;

            const handleClearData = () => {
                if (inputValue === "Ø­Ø°Ù") {
                    localStorage.removeItem('eventPlusLeaderboardAR');
                    setConfirmStep(false);
                    setInputValue("");
                    playSound('break');
                    onClose(); 
                } else {
                    playSound('wrong');
                }
            };

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md animate-fade-in p-4">
                    <div className="glass-panel p-6 rounded-3xl w-full max-w-sm relative">
                        <button onClick={onClose} className="absolute top-4 left-4 p-2 bg-white/5 rounded-full hover:bg-white/10 transition-colors"><Icon name="X" /></button>
                        <h2 className="text-2xl font-bold mb-8 text-center flex items-center justify-center gap-2"><Icon name="Settings" /> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
                        <div className="space-y-4">
                            <div className="flex justify-between items-center bg-white/5 p-4 rounded-2xl border border-white/5">
                                <div className="flex items-center gap-3"><Icon name={audioSettings.musicOn ? "Music" : "Music2"} className="text-purple-400" /><span>Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</span></div>
                                <button onClick={() => setAudioSettings(prev => ({...prev, musicOn: !prev.musicOn}))} className={`w-12 h-6 rounded-full p-1 transition-colors ${audioSettings.musicOn ? 'bg-green-500' : 'bg-slate-600'}`}><div className={`w-4 h-4 bg-white rounded-full transition-transform ${audioSettings.musicOn ? 'translate-x-0' : '-translate-x-6'}`}></div></button>
                            </div>
                            <div className="flex justify-between items-center bg-white/5 p-4 rounded-2xl border border-white/5">
                                <div className="flex items-center gap-3"><Icon name={audioSettings.sfxOn ? "Volume2" : "VolumeX"} className="text-pink-400" /><span>Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª (SFX)</span></div>
                                <button onClick={() => { AUDIO_SETTINGS.sfxOn = !audioSettings.sfxOn; setAudioSettings(prev => ({...prev, sfxOn: !prev.sfxOn})); }} className={`w-12 h-6 rounded-full p-1 transition-colors ${audioSettings.sfxOn ? 'bg-green-500' : 'bg-slate-600'}`}><div className={`w-4 h-4 bg-white rounded-full transition-transform ${audioSettings.sfxOn ? 'translate-x-0' : '-translate-x-6'}`}></div></button>
                            </div>
                            
                            <div className="bg-white/5 p-4 rounded-2xl border border-white/5 flex flex-col gap-3">
                                <div className="flex items-center gap-2 text-white/70 text-sm"><Icon name="Sliders" size={14} /> Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª</div>
                                <MusicController volume={globalVolume} setVolume={setGlobalVolume} />
                            </div>

                            <div className="pt-2">
                                {!confirmStep ? (
                                    <button onClick={() => setConfirmStep(true)} className="w-full p-4 rounded-xl font-bold bg-red-900/20 text-red-400 border border-red-500/20 hover:bg-red-900/40 transition-all flex items-center justify-center gap-2"><Icon name="Trash2" size={18} /> Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„ØµØ¯Ø§Ø±Ø©</button>
                                ) : (
                                    <div className="flex flex-col gap-2 bg-red-900/10 p-3 rounded-2xl border border-red-500/20">
                                        <p className="text-xs text-red-300 text-center">Ø§ÙƒØªØ¨ "Ø­Ø°Ù" Ù„Ù„ØªØ£ÙƒÙŠØ¯</p>
                                        <input type="text" value={inputValue} onChange={(e) => setInputValue(e.target.value)} className="w-full p-3 rounded-xl bg-black/40 border border-red-500/30 text-center focus:outline-none focus:border-red-500" placeholder="Ø­Ø°Ù" />
                                        <button onClick={handleClearData} disabled={inputValue !== "Ø­Ø°Ù"} className={`w-full p-3 rounded-xl font-bold transition-all ${inputValue === "Ø­Ø°Ù" ? 'bg-red-600 text-white shadow-lg shadow-red-600/30' : 'bg-white/5 text-white/30'}`}>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const MusicPlayer = ({ isInGame, volume, enabled }) => {
            const audioRef = useRef(null);
            
            useEffect(() => {
                const initAudio = () => {
                    if (audioRef.current && audioRef.current.paused && enabled) {
                        audioRef.current.play().catch(e => console.log("Audio autoplay restricted"));
                    }
                };
                document.addEventListener('click', initAudio, { once: true });
                document.addEventListener('touchstart', initAudio, { once: true });
                return () => {
                    document.removeEventListener('click', initAudio);
                    document.removeEventListener('touchstart', initAudio);
                };
            }, [enabled]);

            useEffect(() => {
                audioRef.current = document.getElementById('bgAudio');
                if(audioRef.current && !enabled) audioRef.current.pause();
                else if(audioRef.current && enabled) audioRef.current.play().catch(e=>{});
            }, [enabled]);

            useEffect(() => {
                const audio = audioRef.current;
                if (!audio || !enabled) return;
                const targetVolume = isInGame ? (volume * 0.5) : volume; 
                if (Math.abs(audio.volume - targetVolume) < 0.01) { audio.volume = targetVolume; return; }
                const fadeInterval = setInterval(() => {
                    const currentVolume = audio.volume;
                    const diff = targetVolume - currentVolume;
                    if (Math.abs(diff) < 0.02) { audio.volume = targetVolume; clearInterval(fadeInterval); }
                    else { audio.volume = diff > 0 ? Math.min(1, currentVolume + 0.02) : Math.max(0, currentVolume - 0.02); }
                }, 50);
                return () => clearInterval(fadeInterval);
            }, [isInGame, volume, enabled]);
            return null;
        };

        const Footer = () => (
            <div className="fixed bottom-0 left-0 w-full z-40 bg-[#0f0518]/90 backdrop-blur-md border-t border-white/10 p-3 flex flex-wrap justify-center items-center gap-4 text-xs sm:text-sm">
                 <div className="flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/5"><span className="text-purple-400 font-bold uppercase tracking-wider">Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</span><span className="flex items-center gap-1 text-white" dir="ltr"><Icon name="Instagram" size={14} /> @eventplus.om</span></div>
                <div className="w-px h-4 bg-white/10 hidden sm:block"></div>
                <div className="flex items-center gap-2 bg-white/5 px-3 py-1.5 rounded-full border border-white/5"><span className="text-pink-400 font-bold uppercase tracking-wider">Ù„Ù„Ø·Ù„Ø¨ Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±</span><span className="flex items-center gap-1 text-white" dir="ltr"><Icon name="Phone" size={14} /> +968 77220363</span></div>
            </div>
        );

        // --- COPYRIGHT COMPONENT (Adjusted Position) ---
        const CopyrightBadge = () => (
            <div className="fixed bottom-14 left-4 z-50 bg-[#1a0b2e]/90 backdrop-blur-xl border border-white/10 p-2 pr-4 rounded-2xl flex items-center gap-3 shadow-2xl shadow-purple-900/20 animate-slideUp">
                <img 
                    src="587278325_18547948189037653_3361709083164884238_n.jpg" 
                    alt="Event Plus" 
                    className="w-10 h-10 rounded-xl object-cover border border-white/5"
                    onError={(e) => {e.target.style.display='none'}}
                />
                <div className="flex flex-col">
                    <span className="text-[10px] text-gray-400 font-medium">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</span>
                    <span className="text-xs font-bold text-white tracking-widest font-sans uppercase">EVENT PLUSÂ®</span>
                </div>
            </div>
        );

        const VirtualKeyboard = ({ onChar, onDelete, onEnter, isVisible }) => {
            if (!isVisible) return null;
            const rows = [['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'], ['Ø¶', 'Øµ', 'Ø«', 'Ù‚', 'Ù', 'Øº', 'Ø¹', 'Ù‡', 'Ø®', 'Ø­', 'Ø¬', 'Ø¯'], ['Ø´', 'Ø³', 'ÙŠ', 'Ø¨', 'Ù„', 'Ø§', 'Øª', 'Ù†', 'Ù…', 'Ùƒ', 'Ø·'], ['Ø°', 'Ø¦', 'Ø¡', 'Ø¤', 'Ø±', 'Ù„Ø§', 'Ù‰', 'Ø©', 'Ùˆ', 'Ø²', 'Ø¸'], ['SPACE', 'DEL', 'ENTER']];
            return (
                <div className="absolute top-0 left-0 w-full bg-slate-900/95 border-b-2 border-purple-500/50 p-2 z-50 shadow-2xl backdrop-blur-md animate-slideDown">
                    <div className="flex flex-col gap-2 max-w-4xl mx-auto">
                        {rows.map((row, i) => (
                            <div key={i} className="flex justify-center gap-1">
                                {row.map((key) => {
                                    if (key === 'SPACE') return <button key={key} onClick={() => onChar(' ')} className="h-12 flex-1 max-w-[200px] bg-slate-700 rounded-lg text-white font-bold border border-white/10">Ù…Ø³Ø§ÙØ©</button>;
                                    if (key === 'DEL') return <button key={key} onClick={onDelete} className="h-12 w-20 bg-red-900/50 rounded-lg text-white font-bold border border-white/10 flex items-center justify-center"><Icon name="Delete" size={20} /></button>;
                                    if (key === 'ENTER') return <button key={key} onClick={onEnter} className="h-12 w-24 bg-green-600 rounded-lg text-white font-bold border border-white/10">ØªØ£ÙƒÙŠØ¯</button>;
                                    return <button key={key} onClick={() => onChar(key)} className="h-12 w-10 sm:w-12 bg-slate-700 rounded-lg text-white font-bold text-lg border border-white/10 shadow-sm">{key}</button>;
                                })}
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const HeartUnit = ({ broken }) => (
            <div className={`relative w-6 h-6 transition-all duration-300 ${broken ? 'opacity-50' : 'opacity-100'}`}>
                {broken ? <div className="animate-heart-break absolute inset-0 text-gray-500"><Icon name="HeartCrack" size={24} fill="currentColor" /></div> : <Icon name="Heart" size={24} className="text-red-500 fill-red-500 drop-shadow-glow" />}
            </div>
        );

        const LivesDisplay = ({ maxLives, currentLives }) => (
            <div className="flex gap-2 bg-black/40 p-2 rounded-full backdrop-blur-sm border border-white/10">
                {[...Array(maxLives)].map((_, i) => (<HeartUnit key={i} broken={i >= currentLives} />))}
            </div>
        );

        const GameMath = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [problem, setProblem] = useState(null);
            const [timeLeft, setTimeLeft] = useState(20 * diff.timeFactor);
            const [streak, setStreak] = useState(0);

            const generateProblem = useCallback(() => {
                const range = diff.mathRange;
                const isAddition = Math.random() > 0.5;
                let n1 = Math.floor(Math.random() * range) + 1;
                let n2 = Math.floor(Math.random() * range) + 1;
                if (!isAddition && n1 < n2) [n1, n2] = [n2, n1];
                const ans = isAddition ? n1 + n2 : n1 - n2;
                let wrong1 = ans + Math.floor(Math.random() * 5) + 1;
                let wrong2 = ans - Math.floor(Math.random() * 5) - 1;
                if (wrong2 < 0) wrong2 = ans + 2; 
                setProblem({ n1, n2, op: isAddition ? '+' : '-', ans, options: [ans, wrong1, wrong2].sort(() => Math.random() - 0.5) });
            }, [diff]);

            useEffect(() => {
                generateProblem();
                const timer = setInterval(() => { setTimeLeft(t => { if(t <= 0) { clearInterval(timer); onEnd(); return 0; } return t - 0.1; }); }, 100);
                return () => clearInterval(timer);
            }, [generateProblem]);

            const handleAnswer = (val) => {
                if (val === problem.ans) {
                    let pts = diff.gamePoints.MATH;
                    if (streak >= 2) { pts = Math.floor(pts * 1.5); playSound('bonus'); } else playSound('correct');
                    setTimeLeft(prev => Math.min(prev + diff.timeBonus.MATH, 30)); 
                    onScore(pts); setStreak(s=>s+1); generateProblem();
                } else { playSound('wrong'); onLifeLost(); setStreak(0); generateProblem(); }
            };
            if (!problem) return null;
            return (
                <div className="flex flex-col items-center justify-center h-full gap-8">
                     <div className="flex justify-between w-full px-8"><div className="text-xl text-white/70">Ø§Ø­Ø³Ø¨ Ø¨Ø³Ø±Ø¹Ø©!</div><div className="text-xl font-mono text-yellow-400">{Math.ceil(timeLeft)}Ø«</div></div>
                    <div className="flex items-center gap-4 text-7xl font-black text-white"><span>{problem.n1}</span><span className="text-purple-400">{problem.op}</span><span>{problem.n2}</span><span className="text-white/50">=</span><span className="text-yellow-400">?</span></div>
                    <div className="grid grid-cols-3 gap-4 w-full max-w-lg px-4 mt-8">{problem.options.map((opt, i) => (<Button key={i} onClick={() => handleAnswer(opt)} variant="neutral" className="text-3xl aspect-[4/3] h-auto">{opt}</Button>))}</div>
                </div>
            );
        };

        const GameQuiz = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [questions, setQuestions] = useState([]);
            const [qIdx, setQIdx] = useState(0);
            const [timeLeft, setTimeLeft] = useState(15 * diff.timeFactor);
            const QUESTIONS_DB = {
            EASY: [
                {q: "Ù‡ÙŠØ´ Ù‡ÙŠ Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ù„Ø·Ù†Ø©ØŸ", a: ["Ù…Ø³Ù‚Ø·", "ØµÙ„Ø§Ù„Ø©", "ØµØ­Ø§Ø±"], c: "Ù…Ø³Ù‚Ø·"},
                {q: "ÙˆÙŠØ´ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù„ÙŠ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ ÙÙŠ Ø¹Ù…Ø§Ù†ØŸ", a: ["Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ", "Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±", "Ø§Ù„Ø¯Ø±Ù‡Ù…"], c: "Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ"},
                {q: "Ù…Ù†Ù‡Ùˆ Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ Ø§Ù„Ù„Ù‡ ÙŠØ­ÙØ¸Ù‡ØŸ", a: ["Ù‡ÙŠØ«Ù… Ø¨Ù† Ø·Ø§Ø±Ù‚", "Ù‚Ø§Ø¨ÙˆØ³ Ø¨Ù† Ø³Ø¹ÙŠØ¯", "Ø³Ø¹ÙŠØ¯ Ø¨Ù† ØªÙŠÙ…ÙˆØ±"], c: "Ù‡ÙŠØ«Ù… Ø¨Ù† Ø·Ø§Ø±Ù‚"},
                {q: "Ø§Ù„Ø®Ù†Ø¬Ø± ÙÙŠ Ø§Ù„Ø¹Ù„Ù… Ù„ÙˆÙ†Ù‡ Ù‡ÙŠØ´ØŸ", a: ["Ø£Ø¨ÙŠØ¶", "Ø£Ø­Ù…Ø±", "Ø£Ø®Ø¶Ø±"], c: "Ø£Ø¨ÙŠØ¶"},
                {q: "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ù„ÙŠ ÙŠØ²Ø±Ø¹ÙˆÙ† ÙÙŠÙ‡ Ø±Ù…Ø§Ù† ÙˆÙˆØ±Ø¯? ", a: ["Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø®Ø¶Ø±", "Ø´Ù…Ø³", "Ø§Ù„ÙƒÙˆØ±"], c: "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø®Ø¶Ø±"},
                {q: "Ù‡ÙŠØ´ Ø£Ø´Ù‡Ø± Ø­Ù„ÙˆÙ‰ Ù†Ù‚Ø¯Ù…Ù‡Ø§ Ù„Ù„Ø¶ÙŠÙØŸ", a: ["Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©", "Ø§Ù„Ø¨Ù‚Ù„Ø§ÙˆØ©", "Ø§Ù„ÙƒÙ†Ø§ÙØ©"], c: "Ø§Ù„Ø­Ù„ÙˆÙ‰ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ©"},
                {q: "ÙˆÙŠÙ† ÙŠØµÙŠØ± Ù…Ù‡Ø±Ø¬Ø§Ù† Ø§Ù„Ø®Ø±ÙŠÙØŸ", a: ["ØµÙ„Ø§Ù„Ø©", "ØµÙˆØ±", "Ù†Ø²ÙˆÙ‰"], c: "ØµÙ„Ø§Ù„Ø©"},
                {q: "ÙˆÙŠØ´ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø¹Ù„Ù…Ù†Ø§ØŸ", a: ["Ø§Ù„Ø®Ù†Ø¬Ø± ÙˆØ§Ù„Ø³ÙŠÙÙŠÙ†", "Ø§Ù„Ù†Ø®Ù„Ø©", "Ø§Ù„ØµÙ‚Ø±"], c: "Ø§Ù„Ø®Ù†Ø¬Ø± ÙˆØ§Ù„Ø³ÙŠÙÙŠÙ†"},
                {q: "Ø§Ù„Ø±Ø¬Ø§Ù„ Ø¹Ù†Ø¯Ù†Ø§ Ù‡ÙŠØ´ ÙŠÙ„Ø¨Ø³ÙˆÙ†ØŸ", a: ["Ø¯Ø´Ø¯Ø§Ø´Ø©", "Ø«ÙˆØ¨", "Ø¬Ù„Ø§Ø¨ÙŠØ©"], c: "Ø¯Ø´Ø¯Ø§Ø´Ø©"},
                {q: "Ø§Ù„Ù„ÙŠ ÙŠÙ†Ø­Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø³ ÙÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠØ§Øª Ù‡ÙŠØ´ ÙŠØ³Ù…ÙˆÙ†Ù‡ØŸ", a: ["Ù…ØµØ±", "ØºØªØ±Ø©", "Ø´Ù…Ø§Øº"], c: "Ù…ØµØ±"},
                {q: "ÙˆØ§Ù„Ù‚Ø¨Ø¹Ø© Ø§Ù„Ù…Ø·Ø±Ø²Ø© Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["ÙƒÙ…Ø©", "Ø·Ø§Ù‚ÙŠØ©", "Ø¹Ù…Ø©"], c: "ÙƒÙ…Ø©"},
                {q: "Ø§Ù„Ø­ÙŠÙˆØ§Ù† Ø§Ù„Ù„ÙŠ ÙŠØ¹ØªØ¨Ø± Ø±Ù…Ø² Ù„Ù„Ù…Ø­Ù…ÙŠØ§Øª Ø¹Ù†Ø¯Ù†Ø§ØŸ", a: ["Ø§Ù„Ù…Ù‡Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠ", "Ø§Ù„Ù†Ù…Ø±", "Ø§Ù„ÙÙŠÙ„"], c: "Ø§Ù„Ù…Ù‡Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠ"},
                {q: "Ø´Ø¬Ø±Ø© Ø§Ù„Ù„Ø¨Ø§Ù† ÙˆÙŠÙ† ØªÙƒØ«Ø±ØŸ", a: ["Ø¸ÙØ§Ø±", "Ù…Ø³Ù‚Ø·", "Ø§Ù„Ø¨Ø§Ø·Ù†Ø©"], c: "Ø¸ÙØ§Ø±"},
                {q: "Ø£ÙƒØ¨Ø± Ù…Ø·Ø§Ø± ÙÙŠ Ø¹Ù…Ø§Ù† Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡ØŸ", a: ["Ù…Ø·Ø§Ø± Ù…Ø³Ù‚Ø·", "Ù…Ø·Ø§Ø± Ø¯Ø¨ÙŠ", "Ù…Ø·Ø§Ø± Ø§Ù„Ø¯ÙˆØ­Ø©"], c: "Ù…Ø·Ø§Ø± Ù…Ø³Ù‚Ø·"},
                {q: "Ø¨Ø­Ø±Ù†Ø§ Ù…Ù† ØµÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚ Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡ØŸ", a: ["Ø¨Ø­Ø± Ø§Ù„Ø¹Ø±Ø¨", "Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±", "Ø§Ù„Ù…ØªÙˆØ³Ø·"], c: "Ø¨Ø­Ø± Ø§Ù„Ø¹Ø±Ø¨"},
                {q: "Ù…Ù† Ø¬ÙŠØ±Ø§Ù†Ø§ Ù…Ù† ØµÙˆØ¨ Ø§Ù„ØºØ±Ø¨ØŸ", a: ["Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", "Ø§Ù„ÙƒÙˆÙŠØª", "Ø§Ù„Ø¹Ø±Ø§Ù‚"], c: "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"},
                {q: "Ø¯ÙŠØ§Ù†ØªÙ†Ø§ Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù‡ÙŠØ´ØŸ", a: ["Ø§Ù„Ø§Ø³Ù„Ø§Ù…", "Ø§Ù„Ù…Ø³ÙŠØ­ÙŠØ©", "Ø§Ù„Ù‡Ù†Ø¯ÙˆØ³ÙŠØ©"], c: "Ø§Ù„Ø§Ø³Ù„Ø§Ù…"},
                {q: "Ø¨Ø£ÙŠ Ù„ØºØ© Ù†ØªÙƒÙ„Ù… ÙÙŠ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ø­ÙƒÙˆÙ…ÙŠØ©ØŸ", a: ["Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©", "Ø§Ù„Ø£Ø±Ø¯ÙŠØ©"], c: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"},
                {q: "Ø£ÙƒØ¨Ø± Ù…Ø­Ø§ÙØ¸Ø© Ù Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù‡ÙŠØ´ Ù‡ÙŠØŸ", a: ["Ø§Ù„ÙˆØ³Ø·Ù‰", "Ù…Ø³Ù‚Ø·", "Ù…Ø³Ù†Ø¯Ù…"], c: "Ø§Ù„ÙˆØ³Ø·Ù‰"},
                {q: "ÙŠÙˆÙ… Ø§Ù„Ù†Ù‡Ø¶Ø© 23 ÙŠÙˆÙ„ÙŠÙˆ ÙƒØ§Ù† Ù Ø¹Ù‡Ø¯ Ù…Ù†Ù‡ÙˆØŸ", a: ["Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ù‚Ø§Ø¨ÙˆØ³", "Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ù‡ÙŠØ«Ù…", "Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ø³Ø¹ÙŠØ¯"], c: "Ø§Ù„Ø³Ù„Ø·Ø§Ù† Ù‚Ø§Ø¨ÙˆØ³"},
                {q: "Ø§Ù„Ø£ÙƒÙ„Ø© Ø§Ù„Ù„ÙŠ Ù†Ø¯ÙÙ†Ù‡Ø§ ÙÙŠ Ø§Ù„Ø£Ø±Ø¶ Ø£ÙŠØ§Ù… Ø§Ù„Ø¹ÙŠØ¯ Ù‡ÙŠØ´ØŸ", a: ["Ø§Ù„Ø´ÙˆØ§Ø¡", "Ø§Ù„Ù…ÙƒØ¨ÙˆØ³", "Ø§Ù„Ù‡Ø±ÙŠØ³"], c: "Ø§Ù„Ø´ÙˆØ§Ø¡"},
                {q: "Ø·ÙŠØ±Ø§Ù† Ø¨Ù„Ø§Ø¯Ù†Ø§ Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡ØŸ", a: ["Ø§Ù„Ø·ÙŠØ±Ø§Ù† Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ", "Ø·ÙŠØ±Ø§Ù† Ø§Ù„Ø®Ù„ÙŠØ¬", "Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠØ©"], c: "Ø§Ù„Ø·ÙŠØ±Ø§Ù† Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ"},
                {q: "ÙƒÙ… Ù„ÙˆÙ† ÙÙŠ Ø¹Ù„Ù… Ø¹Ù…Ø§Ù† ØºÙŠØ± Ø§Ù„Ø´Ø¹Ø§Ø±ØŸ", a: ["Ø«Ù„Ø§Ø«Ø©", "Ø£Ø±Ø¨Ø¹Ø©", "Ø§Ø«Ù†ÙŠÙ†"], c: "Ø«Ù„Ø§Ø«Ø©"},
                {q: "Ø§Ù„Ù‚Ù‡ÙˆØ© Ø¹Ù†Ø¯Ù†Ø§ Ø±Ù…Ø² Ù„ÙˆÙŠØ´ØŸ", a: ["Ø§Ù„Ø¶ÙŠØ§ÙØ© ÙˆØ§Ù„ÙƒØ±Ù…", "Ø§Ù„ØªØ¬Ø§Ø±Ø©", "Ø§Ù„Ø²Ø±Ø§Ø¹Ø©"], c: "Ø§Ù„Ø¶ÙŠØ§ÙØ© ÙˆØ§Ù„ÙƒØ±Ù…"},
                {q: "Ù…ÙŠÙ†Ø§Ø¡ Ù…Ø³Ù‚Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡ØŸ", a: ["Ù…ÙŠÙ†Ø§Ø¡ Ù…Ø·Ø±Ø­", "ØµØ­Ø§Ø±", "ØµÙ„Ø§Ù„Ø©"], c: "Ù…ÙŠÙ†Ø§Ø¡ Ù…Ø·Ø±Ø­"},
                {q: "Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø´Ø¹Ø¨ÙŠ Ø§Ù„Ù…Ø¹Ø±ÙˆÙ Ù Ù…Ø³Ù‚Ø·ØŸ", a: ["Ø³ÙˆÙ‚ Ù…Ø·Ø±Ø­", "Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒÙŠØ©", "ÙˆØ§Ù‚Ù"], c: "Ø³ÙˆÙ‚ Ù…Ø·Ø±Ø­"},
                {q: "Ø³ÙÙ†Ù†Ø§ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù‡ÙŠØ´ ÙŠØ³Ù…ÙˆÙ†Ù‡Ø§ØŸ", a: ["Ø§Ù„Ø¯Ø§Ùˆ", "Ø§Ù„ÙŠØ®ÙˆØª", "Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª"], c: "Ø§Ù„Ø¯Ø§Ùˆ"},
                {q: "ÙŠÙˆÙ… Ù†Ø³Ù„Ù… Ø¹Ù„Ù‰ Ø­Ø¯ Ù‡ÙŠØ´ Ù†Ù‚ÙˆÙ„ØŸ", a: ["Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…", "Ù…Ø±Ø­Ø¨Ø§Ù‹", "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±"], c: "Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…"},
                {q: "Ø§Ù„ÙØ§ÙƒÙ‡Ø© Ø§Ù„Ù„ÙŠ Ù†Ø²Ø±Ø¹Ù‡Ø§ ÙˆØ§ÙŠØ¯ ÙˆØªØ¬ÙŠ Ù…Ù† Ø§Ù„Ù†Ø®Ù„ØŸ", a: ["Ø§Ù„Ø±Ø·Ø¨/Ø§Ù„ØªÙ…Ø±", "ÙØ±Ø§ÙˆÙ„Ø©", "Ø£Ù†Ø§Ù†Ø§Ø³"], c: "Ø§Ù„Ø±Ø·Ø¨/Ø§Ù„ØªÙ…Ø±"},
                {q: "Ø§Ù„Ø³Ù…ÙƒØ© Ø§Ù„ØµØºÙŠØ±Ø© Ø§Ù„Ù„ÙŠ Ù†Ø¬ÙÙÙ‡Ø§ ÙˆØªÙƒØ«Ø± Ø¹Ù†Ø¯Ù†Ø§ØŸ", a: ["Ø§Ù„Ø¹ÙˆÙ…Ø©", "Ø³Ù„Ù…ÙˆÙ†", "Ù‚Ø±Ø´"], c: "Ø§Ù„Ø¹ÙˆÙ…Ø©"}
            ],
            MEDIUM: [
                {q: "Ø§Ù„Ø±ÙŠ Ù…Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„ÙŠÙ† Ù‡ÙŠØ´ ÙŠØ³Ù…ÙˆÙ†Ù‡ØŸ", a: ["Ø§Ù„Ø£ÙÙ„Ø§Ø¬", "Ø§Ù„Ø¢Ø¨Ø§Ø±", "Ø§Ù„Ø³Ø¯ÙˆØ¯"], c: "Ø§Ù„Ø£ÙÙ„Ø§Ø¬"},
                {q: "Ø£Ø¹Ù„Ù‰ Ø¬Ø¨Ù„ ÙÙŠ Ø¹Ù…Ø§Ù† ÙˆÙŠÙ†ØŸ", a: ["Ø¬Ø¨Ù„ Ø´Ù…Ø³", "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø®Ø¶Ø±", "Ø³Ù…Ø­Ø§Ù†"], c: "Ø¬Ø¨Ù„ Ø´Ù…Ø³"},
                {q: "ÙˆÙŠÙ† ØªÙ‚Ø¹ Ø§Ù„Ù‚Ù„Ø¹Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© Ø§Ù„Ù…Ø¯ÙˆØ±Ø© (Ø§Ù„Ø´Ù‡Ø¨Ø§Ø¡)ØŸ", a: ["Ù†Ø²ÙˆÙ‰", "ØµØ­Ø§Ø±", "ØµÙˆØ±"], c: "Ù†Ø²ÙˆÙ‰"},
                {q: "Ø§Ù„Ù‚Ù„Ø¹Ø© Ø§Ù„Ù„ÙŠ Ø³ÙˆØ±Ù‡Ø§ Ø·ÙˆÙŠÙ„ ÙˆÙ…Ø³Ø¬Ù„Ø© Ù Ø§Ù„ÙŠÙˆÙ†Ø³ÙƒÙˆØŸ", a: ["Ù‚Ù„Ø¹Ø© Ø¨Ù‡Ù„Ø§Ø¡", "Ù†Ø®Ù„", "Ø§Ù„Ø­Ø²Ù…"], c: "Ù‚Ù„Ø¹Ø© Ø¨Ù‡Ù„Ø§Ø¡"},
                {q: "Ø§Ù„Ù…Ø¶ÙŠÙ‚ Ø§Ù„Ù„ÙŠ Ù†Ø·Ù„ Ø¹Ù„ÙŠÙ‡ ÙˆÙŠØªØ­ÙƒÙ… Ù Ø§Ù„ØªØ¬Ø§Ø±Ø©ØŸ", a: ["Ù…Ø¶ÙŠÙ‚ Ù‡Ø±Ù…Ø²", "Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯Ø¨", "Ø¬Ø¨Ù„ Ø·Ø§Ø±Ù‚"], c: "Ù…Ø¶ÙŠÙ‚ Ù‡Ø±Ù…Ø²"},
                {q: "Ø§Ù„ÙˆÙ„Ø§ÙŠØ© Ø§Ù„Ù„ÙŠ ÙŠØµÙ†Ø¹ÙˆÙ† ÙÙŠÙ‡Ø§ Ø³ÙÙ† Ø§Ù„Ø®Ø´Ø¨ØŸ", a: ["ØµÙˆØ±", "Ù‚Ø±ÙŠØ§Øª", "Ø¨Ø±ÙƒØ§Ø¡"], c: "ØµÙˆØ±"},
                {q: "Ø§Ù„ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù„ÙŠ Ù…Ø§ÙŠÙ‡ Ø£Ø®Ø¶Ø± Ø·ÙˆÙ„ Ø§Ù„Ø³Ù†Ø© Ù Ø§Ù„Ø´Ø±Ù‚ÙŠØ©ØŸ", a: ["ÙˆØ§Ø¯ÙŠ Ø¨Ù†ÙŠ Ø®Ø§Ù„Ø¯", "ÙˆØ§Ø¯ÙŠ ØºÙˆÙ„", "Ø§Ù„Ø¬Ø²ÙŠ"], c: "ÙˆØ§Ø¯ÙŠ Ø¨Ù†ÙŠ Ø®Ø§Ù„Ø¯"},
                {q: "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ù„ÙŠ ÙŠØ²Ø±Ø¹ÙˆÙ† ÙÙŠÙ‡ Ø±Ù…Ø§Ù† ÙˆÙˆØ±Ø¯? ", a: ["Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø®Ø¶Ø±", "Ø´Ù…Ø³", "Ø§Ù„ÙƒÙˆØ±"], c: "Ø§Ù„Ø¬Ø¨Ù„ Ø§Ù„Ø£Ø®Ø¶Ø±"},
                {q: "Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ø³Ù„Ø§Ø­Ù Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ù…ØµÙŠØ±Ø©", "Ø§Ù„Ø­Ù„Ø§Ù†ÙŠØ§Øª", "Ø§Ù„ÙØ­Ù„"], c: "Ù…ØµÙŠØ±Ø©"},
                {q: "Ø¯Ø§Ø± Ø§Ù„Ø£ÙˆØ¨Ø±Ø§ ÙˆÙŠÙ† Ù…ÙƒØ§Ù†Ù‡Ø§ Ø¨Ø§Ù„Ø¶Ø¨Ø·ØŸ", a: ["Ø§Ù„Ù‚Ø±Ù…", "Ù…Ø·Ø±Ø­", "Ø§Ù„Ø®ÙˆÙŠØ±"], c: "Ø§Ù„Ù‚Ø±Ù…"},
                {q: "Ø³Ø¯ ÙˆØ§Ø¯ÙŠ Ø¶ÙŠÙ‚Ø© ÙˆÙŠÙ† Ù…ÙƒØ§Ù†Ù‡ØŸ", a: ["Ù‚Ø±ÙŠØ§Øª", "Ø§Ù„Ø¹Ø§Ù…Ø±Ø§Øª", "Ø¨Ø¯Ø¨Ø¯"], c: "Ù‚Ø±ÙŠØ§Øª"},
                {q: "Ø£ÙƒØ¨Ø± ÙƒÙ‡Ù Ù Ø¹Ù…Ø§Ù† (Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¬Ù†) ÙˆÙŠÙ†ØŸ", a: ["Ù‡Ø¶Ø¨Ø© Ø³Ù„Ù…Ø§Ù‡/Ù‚Ø±ÙŠØ§Øª", "Ù†Ø²ÙˆÙ‰", "Ø¹Ø¨Ø±ÙŠ"], c: "Ù‡Ø¶Ø¨Ø© Ø³Ù„Ù…Ø§Ù‡/Ù‚Ø±ÙŠØ§Øª"},
                {q: "Ø§Ù„Ø³ÙÙŠÙ†Ø© Ø§Ù„Ù„ÙŠ Ø±Ø§Ø­Øª Ù„ÙŠÙ† Ø§Ù„ØµÙŠÙ† Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ø³ÙÙŠÙ†Ø© ØµØ­Ø§Ø±", "Ø¬ÙˆÙ‡Ø±Ø© Ù…Ø³Ù‚Ø·", "Ù…Ø¬Ø§Ù†"], c: "Ø³ÙÙŠÙ†Ø© ØµØ­Ø§Ø±"},
                {q: "Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø§Ù„Ù…ÙØµÙˆÙ„Ù‡ Ø¹Ù†Ø§ ÙÙˆÙ‚ ØµÙˆØ¨ Ø§Ù„Ø´Ù…Ø§Ù„ØŸ", a: ["Ù…Ø³Ù†Ø¯Ù…", "Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ", "Ø§Ù„Ø¸Ø§Ù‡Ø±Ø©"], c: "Ù…Ø³Ù†Ø¯Ù…"},
                {q: "Ø§Ù„ÙÙ† Ø§Ù„Ù„ÙŠ ÙŠÙ„Ø¹Ø¨ÙˆÙ† ÙÙŠÙ‡ Ø¨Ø§Ù„Ø³ÙŠÙ ÙˆØ§Ù„Ø¹ØµØ§ØŸ", a: ["Ø§Ù„Ø±Ø²Ø­Ø©", "Ø§Ù„Ù…ÙŠØ¯Ø§Ù†", "Ø§Ù„ØªØºØ±ÙˆØ¯"], c: "Ø§Ù„Ø±Ø²Ø­Ø©"},
                {q: "Ø¹ÙŠÙ† Ø­Ø§Ø±Ø© Ù Ø§Ù„Ø±Ø³ØªØ§Ù‚ Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ø¹ÙŠÙ† Ø§Ù„ÙƒØ³ÙØ©", "Ø§Ù„Ø«ÙˆØ§Ø±Ø©", "Ø£Ø±Ø²Ø§Øª"], c: "Ø¹ÙŠÙ† Ø§Ù„ÙƒØ³ÙØ©"},
                {q: "ÙˆØ¹ÙŠÙ† Ø­Ø§Ø±Ø© Ù Ù†Ø®Ù„ØŸ", a: ["Ø§Ù„Ø«ÙˆØ§Ø±Ø©", "Ø§Ù„ÙƒØ³ÙØ©", "Ø­Ù…Ø±Ø§Ù†"], c: "Ø§Ù„Ø«ÙˆØ§Ø±Ø©"},
                {q: "Ù…Ø¯ÙŠÙ†ØªÙ†Ø§ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù†ÙˆØ§ ÙŠØ³Ù…ÙˆÙ†Ù‡Ø§ Ø¯Ù‡Ù„ÙŠØ² Ø§Ù„ØµÙŠÙ†ØŸ", a: ["ØµØ­Ø§Ø±", "Ù…Ø³Ù‚Ø·", "Ù‚Ù„Ù‡Ø§Øª"], c: "ØµØ­Ø§Ø±"},
                {q: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙØ§Ù„ÙˆØ³Ø·Ù‰ØŸ", a: ["Ø§Ù„Ø¯Ù‚Ù…", "Ù‡ÙŠÙ…Ø§Ø¡", "Ù…Ø­ÙˆØª"], c: "Ø§Ù„Ø¯Ù‚Ù…"},
                {q: "Ø§Ù„Ù‚Ù„Ø§Ø¹ Ø§Ù„Ù„ÙŠ ØªØ­Ø±Ø³ Ù…Ø³Ù‚Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŸ", a: ["Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠ ÙˆØ§Ù„Ù…ÙŠØ±Ø§Ù†ÙŠ", "Ù†Ø²ÙˆÙ‰ ÙˆØ¨Ù‡Ù„Ø§Ø¡", "Ø§Ù„Ø­Ø²Ù… ÙˆØ§Ù„Ø±Ø³ØªØ§Ù‚"], c: "Ø§Ù„Ø¬Ù„Ø§Ù„ÙŠ ÙˆØ§Ù„Ù…ÙŠØ±Ø§Ù†ÙŠ"},
                {q: "Ù…ØªØ­Ù Ù…Ø´Ù‡ÙˆØ± Ù Ù…Ø³Ù‚Ø· Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŸ", a: ["Ø¨ÙŠØª Ø§Ù„Ø²Ø¨ÙŠØ±", "Ø§Ù„ÙˆØ·Ù†ÙŠ", "Ø§Ù„Ø·ÙÙ„"], c: "Ø¨ÙŠØª Ø§Ù„Ø²Ø¨ÙŠØ±"},
                {q: "Ø§Ø³Ù… Ø¸ÙØ§Ø± Ø§Ù„Ø£ÙˆÙ„ÙŠ Ù‡ÙŠØ´ ÙƒØ§Ù†ØŸ", a: ["Ø§Ù„Ø£Ø­Ù‚Ø§Ù", "Ù…Ø¬Ø§Ù†", "Ù…Ø²ÙˆÙ†"], c: "Ø§Ù„Ø£Ø­Ù‚Ø§Ù"},
                {q: "Ø®Ø¨Ø²Ù†Ø§ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ Ø§Ù„Ø®ÙÙŠÙ Ù‡ÙŠØ´ Ù†Ø³Ù…ÙŠÙ‡ØŸ", a: ["Ø®Ø¨Ø² Ø±Ø®Ø§Ù„", "ØªÙ†ÙˆØ±", "Ø´Ø¨Ø§ØªÙŠ"], c: "Ø®Ø¨Ø² Ø±Ø®Ø§Ù„"},
                {q: "Ø³ÙˆÙ‚ Ø§Ù„ØºÙ†Ù… Ù‚Ø¨Ù„ Ø§Ù„Ø¹ÙŠØ¯ Ù‡ÙŠØ´ Ù†Ø³Ù…ÙŠÙ‡ØŸ", a: ["Ø§Ù„Ù‡Ø¨Ø·Ø©", "Ø§Ù„Ø­Ø±Ø§Ø¬", "Ø§Ù„Ù…Ø²Ø§Ø¯"], c: "Ø§Ù„Ù‡Ø¨Ø·Ø©"},
                {q: "Ø£ÙˆÙ„ Ø³ÙÙŠÙ†Ø© Ø±Ø§Ø­Øª Ø£Ù…Ø±ÙŠÙƒØ§ØŸ", a: ["Ø³Ù„Ø·Ø§Ù†Ø©", "ØµØ­Ø§Ø±", "Ø§Ù„Ø±Ø­Ù…Ø§Ù†ÙŠ"], c: "Ø³Ù„Ø·Ø§Ù†Ø©"},
                {q: "Ø¬Ø²Ø± ÙÙŠÙ‡Ø§ Ø´Ø¹Ø§Ø¨ Ù…Ø±Ø¬Ø§Ù†ÙŠØ© Ù Ù…Ø³Ù‚Ø·ØŸ", a: ["Ø§Ù„Ø¯ÙŠÙ…Ø§Ù†ÙŠØ§Øª", "Ø§Ù„Ø­Ù„Ø§Ù†ÙŠØ§Øª", "Ù…ØµÙŠØ±Ø©"], c: "Ø§Ù„Ø¯ÙŠÙ…Ø§Ù†ÙŠØ§Øª"},
                {q: "Ø§Ù„ÙˆØ§Ø¯ÙŠ Ø§Ù„Ù„ÙŠ Ù„Ø§Ø²Ù… ØªØ±ÙƒØ¨ Ù‚Ø§Ø±Ø¨ Ø¹Ø´Ø§Ù† ØªØ¯Ø®Ù„Ù‡ Ù Ø·ÙŠÙˆÙŠØŸ", a: ["ÙˆØ§Ø¯ÙŠ Ø´Ø§Ø¨", "Ø¨Ù†ÙŠ Ø®Ø±ÙˆØµ", "Ø§Ù„Ø£Ø¨ÙŠØ¶"], c: "ÙˆØ§Ø¯ÙŠ Ø´Ø§Ø¨"},
                {q: "Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø®Ø´Ø¨ÙŠ Ù…Ø§Ù„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ù‡ÙŠØ´ Ù†Ø³Ù…ÙŠÙ‡ØŸ", a: ["Ø§Ù„Ù…Ù†Ø¯ÙˆØ³", "Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚", "Ø§Ù„Ø³Ø­Ø§Ø±Ø©"], c: "Ø§Ù„Ù…Ù†Ø¯ÙˆØ³"},
                {q: "ÙˆÙŠÙ† ÙŠÙ‚Ø¹ Ø­ØµÙ† Ø§Ù„Ø­Ø²Ù…ØŸ", a: ["Ø§Ù„Ø±Ø³ØªØ§Ù‚", "Ø§Ù„Ù…ØµÙ†Ø¹Ø©", "Ø¨Ø±ÙƒØ§Ø¡"], c: "Ø§Ù„Ø±Ø³ØªØ§Ù‚"},
                {q: "ÙˆÙŠÙ† ÙŠØµÙ„Ø­ÙˆÙ† Ø§Ù„Ø³ÙÙ† Ø§Ù„ÙƒØ¨Ø§Ø± (Ø§Ù„Ø­ÙˆØ¶ Ø§Ù„Ø¬Ø§Ù)ØŸ", a: ["Ø§Ù„Ø¯Ù‚Ù…", "ØµØ­Ø§Ø±", "ØµÙ„Ø§Ù„Ø©"], c: "Ø§Ù„Ø¯Ù‚Ù…"}
            ],
            HARD: [
                {q: "Ø£ÙŠ Ø³Ù†Ø© Ø·Ø±Ø¯Ù†Ø§ Ø§Ù„Ø¨Ø±ØªØºØ§Ù„ÙŠÙŠÙ† Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ", a: ["1650", "1507", "1741"], c: "1650"},
                {q: "Ù…Ù†Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¨ÙˆØ³Ø¹ÙŠØ¯ØŸ", a: ["Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø¹ÙŠØ¯", "Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³ÙŠÙ", "Ø³ÙŠÙ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†"], c: "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø¹ÙŠØ¯"},
                {q: "Ø§Ø³Ù… Ø¹Ù…Ø§Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ø¬Ø¨Ù„ Ø§Ù„Ù†Ø­Ø§Ø³) Ù‡ÙŠØ´ Ù‡ÙˆØŸ", a: ["Ù…Ø¬Ø§Ù†", "Ù…Ø²ÙˆÙ†", "Ø§Ù„ØºØ¨ÙŠØ±Ø§Ø¡"], c: "Ù…Ø¬Ø§Ù†"},
                {q: "ÙˆÙ…Ø¹Ù†Ù‰ Ø§Ø³Ù… (Ù…Ø²ÙˆÙ†) Ù‡ÙŠØ´ØŸ", a: ["Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„ÙˆØ§Ø¬Ø¯Ø©", "Ø§Ù„Ù†Ø­Ø§Ø³", "Ø§Ù„Ø¬Ø¨Ù„"], c: "Ø§Ù„Ù…ÙŠØ§Ù‡ Ø§Ù„ÙˆØ§Ø¬Ø¯Ø©"},
                {q: "Ø§Ù„Ù…Ù„Ø§Ø­ Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ø£Ø³Ø¯ Ø§Ù„Ø¨Ø­Ø§Ø± Ù…Ù†Ù‡ÙˆØŸ", a: ["Ø£Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø§Ø¬Ø¯", "Ù†Ø§ØµØ± Ø¨Ù† Ù…Ø±Ø´Ø¯", "ÙƒØ¹Ø¨ Ø¨Ù† Ø²Ù‡ÙŠØ±"], c: "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø§Ø¬Ø¯"},
                {q: "Ù…Ù†Ù‡Ùˆ Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù„ÙŠ Ø¨Ù†Ù‰ Ù‚Ù„Ø¹Ø© Ù†Ø²ÙˆÙ‰ØŸ", a: ["Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³ÙŠÙ", "Ù†Ø§ØµØ± Ø¨Ù† Ù…Ø±Ø´Ø¯", "Ø¨Ù„Ø¹Ø±Ø¨"], c: "Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³ÙŠÙ"},
                {q: "ÙˆØ­ØµÙ† Ø¬Ø¨Ø±ÙŠÙ† Ø§Ù„Ø²ÙŠÙ† Ù…Ù†Ù‡Ùˆ Ø¨Ø§Ù†ÙŠÙ‡ØŸ", a: ["Ø¨Ù„Ø¹Ø±Ø¨ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†", "Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³ÙŠÙ", "Ø³ÙŠÙ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†"], c: "Ø¨Ù„Ø¹Ø±Ø¨ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†"},
                {q: "Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ù„ÙŠ Ø³ÙˆÙ‰ Ø¹Ù„Ù… Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆÙ…Ø¹Ø¬Ù… Ø§Ù„Ø¹ÙŠÙ†ØŸ", a: ["Ø§Ù„Ø®Ù„ÙŠÙ„ Ø¨Ù† Ø£Ø­Ù…Ø¯", "Ø§Ø¨Ù† Ø¯Ø±ÙŠØ¯", "Ø§Ù„Ù…Ø¨Ø±Ø¯"], c: "Ø§Ù„Ø®Ù„ÙŠÙ„ Ø¨Ù† Ø£Ø­Ù…Ø¯"},
                {q: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© Ù Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø®Ø§Ù„ÙŠ Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ø£ÙˆØ¨Ø§Ø±", "Ø³Ù…Ù‡Ø±Ù…", "Ø§Ù„Ø¨Ù„ÙŠØ¯"], c: "Ø£ÙˆØ¨Ø§Ø±"},
                {q: "Ù…ÙŠÙ†Ø§Ø¡ Ø§Ù„Ù„Ø¨Ø§Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù Ø¸ÙØ§Ø±ØŸ", a: ["Ø§Ù„Ø¨Ù„ÙŠØ¯", "Ù…Ø±Ø¨Ø§Ø·", "Ø³Ø¯Ø­"], c: "Ø§Ù„Ø¨Ù„ÙŠØ¯"},
                {q: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© Ø§Ù„Ù„ÙŠ Ø¯Ù…Ø±Ù‡Ø§ Ø§Ù„Ø²Ù„Ø²Ø§Ù„ Ù ØµÙˆØ±ØŸ", a: ["Ù‚Ù„Ù‡Ø§Øª", "Ø·ÙŠÙˆÙŠ", "Ø±Ø£Ø³ Ø§Ù„Ø­Ø¯"], c: "Ù‚Ù„Ù‡Ø§Øª"},
                {q: "Ù‚Ø¨Ø± (Ø¨ÙŠØ¨ÙŠ Ù…Ø±ÙŠÙ…) ÙˆÙŠÙ† Ù…Ø­Ù„Ù‡ØŸ", a: ["Ù‚Ù„Ù‡Ø§Øª", "Ù†Ø²ÙˆÙ‰", "ØµØ­Ø§Ø±"], c: "Ù‚Ù„Ù‡Ø§Øª"},
                {q: "Ø£Ø¹Ù…Ù‚ ÙÙ„Ø¬ Ù Ø¹Ù…Ø§Ù† ÙˆÙ…Ø³Ø¬Ù„ Ù Ø§Ù„ÙŠÙˆÙ†Ø³ÙƒÙˆØŸ", a: ["ÙÙ„Ø¬ Ø§Ù„Ù…Ù„ÙƒÙŠ", "Ø§Ù„Ø¬ÙŠÙ„Ø©", "Ø¯Ø§Ø±Ø³"], c: "ÙÙ„Ø¬ Ø§Ù„Ù…Ù„ÙƒÙŠ"},
                {q: "Ø£Ø·ÙˆÙ„ ÙÙ„Ø¬ Ø¹Ù†Ø¯Ù†Ø§ Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡ØŸ", a: ["ÙÙ„Ø¬ Ø¯Ø§Ø±Ø³", "Ø§Ù„Ù…ÙŠØ³Ø±", "Ø§Ù„Ø®Ø·Ù…ÙŠÙ†"], c: "ÙÙ„Ø¬ Ø¯Ø§Ø±Ø³"},
                {q: "Ù…ØªÙ‰ Ø¯Ø®Ù„Øª Ø¹Ù…Ø§Ù† Ø§Ù„Ø£Ù…Ù… Ø§Ù„Ù…ØªØ­Ø¯Ø©ØŸ", a: ["1971", "1970", "1975"], c: "1971"},
                {q: "Ø§Ù„ÙÙ† Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡ Ø´Ø¹Ø± ÙˆÙØ®Ø± ÙˆØ¨Ø¯ÙˆÙ† Ø·Ø¨ÙˆÙ„ØŸ", a: ["Ø§Ù„Ø¹Ø§Ø²ÙŠ", "Ø§Ù„Ù‡Ù…Ø¨Ù„", "Ø§Ù„Ø±Ø²Ø­Ø©"], c: "Ø§Ù„Ø¹Ø§Ø²ÙŠ"},
                {q: "Ù…Ø¯Ø§ÙÙ† Ø´ÙƒÙ„Ù‡Ø§ Ù…Ø«Ù„ Ø®Ù„ÙŠØ© Ø§Ù„Ù†Ø­Ù„ Ù Ø¹Ø¨Ø±ÙŠ ÙˆÙŠÙ†ØŸ", a: ["Ø¨Ø§Øª ÙˆØ§Ù„Ø®Ø·Ù…", "Ø²ÙƒÙŠØª", "Ø³Ù…Ø¯"], c: "Ø¨Ø§Øª ÙˆØ§Ù„Ø®Ø·Ù…"},
                {q: "Ø§Ù„Ø³ÙÙŠÙ†Ø© Ø§Ù„Ø¹ÙˆØ¯Ø© (Ø§Ù„ÙƒØ¨ÙŠØ±Ø©) Ù…Ø§Ù„Øª Ø§Ù„Ù…Ø­ÙŠØ·Ø§Øª Ù‡ÙŠØ´ ÙŠØ³Ù…ÙˆÙ†Ù‡Ø§ØŸ", a: ["Ø§Ù„ØºØ§Ù†Ø¬Ø©", "Ø§Ù„Ù‡ÙˆØ±ÙŠ", "Ø§Ù„Ø´Ø§Ø´Ù‡"], c: "Ø§Ù„ØºØ§Ù†Ø¬Ø©"},
                {q: "ÙŠÙˆÙ… Ø§Ù„Ù…Ø±Ø£Ø© Ø§Ù„Ø¹Ù…Ø§Ù†ÙŠØ© Ø£ÙŠ ØªØ§Ø±ÙŠØ®ØŸ", a: ["17 Ø£ÙƒØªÙˆØ¨Ø±", "18 Ù†ÙˆÙÙ…Ø¨Ø±", "8 Ù…Ø§Ø±Ø³"], c: "17 Ø£ÙƒØªÙˆØ¨Ø±"},
                {q: "Ù…ØªÙ‰ ÙˆÙ‚Ø¹ÙˆØ§ Ø§ØªÙØ§Ù‚ÙŠØ© Ø§Ù„Ø³ÙŠØ¨ØŸ", a: ["1920", "1955", "1913"], c: "1920"},
                {q: "Ø£ÙˆÙ„ Ø¬Ø±ÙŠØ¯Ø© Ø¹Ù…Ø§Ù†ÙŠØ© Ù Ø²Ù†Ø¬Ø¨Ø§Ø± Ù‡ÙŠØ´ ÙƒØ§Ù† Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ø§Ù„ÙÙ„Ù‚", "Ø§Ù„Ù†Ø¬Ø§Ø­", "Ø§Ù„Ù†Ù‡Ø¶Ø©"], c: "Ø§Ù„Ù†Ø¬Ø§Ø­"},
                {q: "Ø­ØµÙ† Ø§Ù„Ø³Ù„ÙŠÙ ÙˆÙŠÙ† ÙŠÙ‚Ø¹ØŸ", a: ["Ø¹Ø¨Ø±ÙŠ", "Ù…Ù‚Ø´Ù†", "Ø£Ø¯Ù…"], c: "Ø¹Ø¨Ø±ÙŠ"},
                {q: "Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù„ÙŠ ÙˆØ­Ø¯ Ø§Ù„Ø¨Ù„Ø§Ø¯ ÙˆØ¨Ø¯Ø£ Ø¯ÙˆÙ„Ø© Ø§Ù„ÙŠØ¹Ø§Ø±Ø¨Ø©ØŸ", a: ["Ù†Ø§ØµØ± Ø¨Ù† Ù…Ø±Ø´Ø¯", "Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ø³ÙŠÙ", "Ù…Ø±Ø´Ø¯"], c: "Ù†Ø§ØµØ± Ø¨Ù† Ù…Ø±Ø´Ø¯"},
                {q: "Ù…ÙˆØ³Ù… Ø®Ø±Ø§Ù Ø§Ù„Ø±Ø·Ø¨ Ù‡ÙŠØ´ Ù†Ø³Ù…ÙŠÙ‡ØŸ", a: ["Ø§Ù„Ù‚ÙŠØ¸", "Ø§Ù„ØµØ±Ø§Ù…", "Ø§Ù„Ø¬Ø¯Ø§Ø¯"], c: "Ø§Ù„Ù‚ÙŠØ¸"},
                {q: "Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù„ÙŠ Ø­Ø±Ø± Ù…Ù…Ø¨Ø§Ø³Ø§ ÙˆØ³Ù…ÙˆÙ‡ (Ù‚ÙŠØ¯ Ø§Ù„Ø£Ø±Ø¶)ØŸ", a: ["Ø³ÙŠÙ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†", "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ø¹ÙŠØ¯", "Ø«ÙˆÙŠÙ†ÙŠ"], c: "Ø³ÙŠÙ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†"},
                {q: "Ø§Ù„Ø¨Ø±ÙŠÙ…ÙŠ ÙˆÙŠØ´ ÙƒØ§Ù† Ø§Ø³Ù…Ù‡Ø§ Ù‚Ø¨Ù„ØŸ", a: ["ØªÙˆØ§Ù…", "Ø§Ù„Ø¬ÙˆÙ", "Ø§Ù„Ø³Ø±"], c: "ØªÙˆØ§Ù…"},
                {q: "ÙÙ† Ø§Ù„Ø­Ø±ÙŠÙ… Ø§Ù„Ù…Ø¹Ø±ÙˆÙ Ù Ø¸ÙØ§Ø±ØŸ", a: ["Ø§Ù„Ø·Ø¨Ù„", "Ø§Ù„Ø±Ø²Ø­Ø©", "Ø§Ù„Ø¹Ø§Ø²ÙŠ"], c: "Ø§Ù„Ø·Ø¨Ù„"},
                {q: "Ø§Ù„Ù…Ø¹Ø§Ù‡Ø¯Ø© Ù…Ø¹ Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§ Ø¹Ø§Ù… 1839 Ù‡ÙŠØ´ Ø§Ø³Ù…Ù‡Ø§ØŸ", a: ["Ø§Ù„ØµØ¯Ø§Ù‚Ø© ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø©", "Ø§Ù„Ø­Ù…Ø§ÙŠØ©", "Ù…Ø³Ù‚Ø·"], c: "Ø§Ù„ØµØ¯Ø§Ù‚Ø© ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø©"},
                {q: "Ø­ØµÙ† Ø§Ù„Ø£Ø³ÙˆØ¯ ÙˆÙŠÙ† Ù…ÙƒØ§Ù†Ù‡ØŸ", a: ["Ø¹Ø¨Ø±ÙŠ", "Ù…Ù‚Ø´Ù†", "Ø£Ø¯Ù…"], c: "Ø¹Ø¨Ø±ÙŠ"},
                {q: "Ø¹Ø§ØµÙ…Ø© Ø¹Ù…Ø§Ù† Ù Ø²Ù…Ù† Ø§Ù„Ø³ÙŠØ¯ Ø³Ø¹ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† ÙƒØ§Ù†Øª Ù…Ø³Ù‚Ø· Ùˆ...ØŸ", a: ["Ø²Ù†Ø¬Ø¨Ø§Ø±", "Ù…ÙƒØ±Ø§Ù†", "Ø¬ÙˆØ§Ø¯ÙˆØ±"], c: "Ø²Ù†Ø¬Ø¨Ø§Ø±"}
            ]
        };
            useEffect(() => {
                const pool = QUESTIONS_DB[diff.id] || QUESTIONS_DB.EASY;
                setQuestions(pool.sort(() => Math.random() - 0.5).slice(0, 5));
                const timer = setInterval(() => { setTimeLeft(t => { if(t <= 0) { clearInterval(timer); onEnd(); return 0; } return t - 0.1; }); }, 100);
                return () => clearInterval(timer);
            }, [diff.id]);
            const handleAns = (ans) => {
                if(ans === questions[qIdx].c) { playSound('correct'); onScore(diff.gamePoints.QUIZ); }
                else { playSound('wrong'); onLifeLost(); }
                if(qIdx < questions.length - 1) { setQIdx(qIdx+1); setTimeLeft(15 * diff.timeFactor); } else onEnd();
            };
            if (questions.length === 0) return <div>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>;
            return (
                <div className="flex flex-col h-full justify-center space-y-6">
                    <div className="flex justify-between px-4"><span>Ø³Ø¤Ø§Ù„ {qIdx+1}</span><span className="text-yellow-400">{Math.ceil(timeLeft)}Ø«</span></div>
                    <div className="bg-white/10 p-8 rounded-2xl text-2xl font-bold text-center">{questions[qIdx].q}</div>
                    <div className="grid gap-4">{questions[qIdx].a.map((opt, i) => (<Button key={i} onClick={() => handleAns(opt)} variant="neutral">{opt}</Button>))}</div>
                </div>
            );
        };

        const GameReflex = ({ diff, onScore, onEnd, onLifeLost }) => {
            const [active, setActive] = useState(null); 
            const [timeLeft, setTimeLeft] = useState(30);
            const [streak, setStreak] = useState(0); 
            const timerRef = useRef(null);
            const activeRef = useRef(null);
            const mountedRef = useRef(true);

            useEffect(() => {
                mountedRef.current = true;
                spawnTarget();
                const gameTimer = setInterval(() => { setTimeLeft(t => { if(t<=0) { onEnd(); return 0; } return t-1; }); }, 1000);
                return () => { mountedRef.current = false; clearInterval(gameTimer); clearTimeout(timerRef.current); };
            }, []);
            useEffect(() => { activeRef.current = active; }, [active]);

            const spawnTarget = () => {
                if (!mountedRef.current) return;
                if(timerRef.current) clearTimeout(timerRef.current);
                
                const nextType = Math.random() > 0.3 ? 'TARGET' : 'BOMB';
                const nextObj = { index: Math.floor(Math.random() * 9), type: nextType };
                setActive(nextObj);
                
                const duration = 1000 / diff.speedFactor;
                timerRef.current = setTimeout(() => { 
                    if (mountedRef.current) {
                        if (activeRef.current && activeRef.current.type === 'TARGET') {
                            onLifeLost(); 
                            playSound('break'); 
                            setStreak(0);
                        }
                        setActive(null); 
                        setTimeout(spawnTarget, 200);
                    }
                }, duration); 
            };

            const handleClick = (idx) => {
                if (!active || idx !== active.index) return; 

                if(active.type === 'TARGET') {
                    let pts = diff.gamePoints.REFLEX;
                    if(streak >= 3) { pts = Math.floor(pts * 1.5); playSound('bonus'); } else playSound('pop');
                    onScore(pts); setStreak(s=>s+1);
                    setActive(null); spawnTarget(); 
                } else if (active.type === 'BOMB') {
                    playSound('break'); 
                    onLifeLost(); 
                    setStreak(0); 
                    setActive(null); spawnTarget();
                }
            };

            return (
                <div className="flex flex-col items-center justify-center h-full w-full">
                    <div className="flex justify-between w-full max-w-md px-4 mb-4">
                         <div className="text-3xl font-mono text-yellow-400">{timeLeft}Ø«</div>
                         {streak > 2 && <div className="text-green-400 font-bold animate-pulse">ğŸ”¥ x{streak > 3 ? '2' : '1.5'}</div>}
                    </div>
                    {/* Responsive Grid Container */}
                    <div className="grid grid-cols-3 gap-3 bg-white/5 p-4 rounded-2xl border border-white/10 w-full max-w-md aspect-square">
                        {[...Array(9)].map((_, i) => (
                            <button key={i} onClick={() => handleClick(i)} className={`w-full h-full aspect-square rounded-xl flex items-center justify-center bg-slate-800 scale-95 border border-white/5 overflow-hidden transition-colors hover:bg-slate-700`}>
                                {active && active.index === i && (
                                    <div className={`animate-bounceIn w-full h-full flex items-center justify-center`}>
                                        {active.type === 'TARGET' ? (
                                            <div className="w-[70%] h-[70%] bg-green-500 rounded-lg shadow-[0_0_15px_rgba(34,197,94,0.8)] border-4 border-green-300 animate-pulse"></div>
                                        ) : (
                                            <div className="relative w-[70%] h-[70%] bg-red-600 rounded-full flex items-center justify-center shadow-[0_0_15px_rgba(220,38,38,0.8)] border-4 border-red-400">
                                                <Icon name="Bomb" size={32} className="text-black drop-shadow-sm absolute w-1/2 h-1/2" />
                                            </div>
                                        )}
                                    </div>
                                )}
                            </button>
                        ))}
                    </div>
                    <div className="mt-4 text-center text-sm opacity-60">
                        <p>Ø§Ø¶ØºØ· <span className="text-green-400">â– </span> Ø¨Ø³Ø±Ø¹Ø©!</p>
                        <p>ØªØ¬Ù†Ø¨ <Icon name="Bomb" size={14} className="inline text-red-500"/> (ØªÙƒØ³Ø± Ø§Ù„Ù‚Ù„Ø¨ ÙˆÙ„Ø§ ØªÙ†Ù‚Øµ Ø§Ù„Ù†Ù‚Ø§Ø·)</p>
                    </div>
                </div>
            );
        };

        const GameColor = ({ diff, onScore, onEnd, onLifeLost }) => {
            const COLORS = [{ n: 'Ø£Ø­Ù…Ø±', h: 'text-red-500'}, { n: 'Ø£Ø²Ø±Ù‚', h: 'text-blue-500'}, { n: 'Ø£Ø®Ø¶Ø±', h: 'text-green-500'}, { n: 'Ø£ØµÙØ±', h: 'text-yellow-500'}];
            const [current, setCurrent] = useState({ text: '', color: '', match: false });
            const [timeLeft, setTimeLeft] = useState(20);
            useEffect(() => { nextRound(); const t = setInterval(() => setTimeLeft(p => { if(p<=0){onEnd(); return 0;} return p-1; }), 1000); return () => clearInterval(t); }, []);
            const nextRound = () => {
                const tO = COLORS[Math.floor(Math.random() * 4)];
                const cO = COLORS[Math.floor(Math.random() * 4)];
                const isMatch = Math.random() > 0.5;
                if (isMatch) setCurrent({ text: tO.n, color: tO.h, match: true });
                else { let fC = cO; while(fC.n === tO.n) fC = COLORS[Math.floor(Math.random() * 4)]; setCurrent({ text: tO.n, color: fC.h, match: false }); }
            };
            const handleChoice = (c) => {
                if (c === current.match) { 
                    playSound('correct'); 
                    setTimeLeft(prev => Math.min(prev + diff.timeBonus.COLOR, 30));
                    onScore(diff.gamePoints.COLOR); 
                }
                else { playSound('wrong'); onLifeLost(); }
                nextRound();
            };
            return (
                <div className="flex flex-col items-center justify-center h-full gap-8">
                    <div className={`text-6xl font-black ${current.color} drop-shadow-[0_0_15px_rgba(255,255,255,0.3)] scale-150`}>{current.text}</div>
                    <div className="text-2xl font-mono text-yellow-400">{timeLeft}Ø«</div>
                    <div className="flex gap-4 w-full px-8 max-w-lg"><Button onClick={() => handleChoice(true)} variant="success" className="flex-1 h-20 text-2xl">ØµØ­</Button><Button onClick={() => handleChoice(false)} variant="error" className="flex-1 h-20 text-2xl">Ø®Ø·Ø£</Button></div>
                </div>
            );
        };

        const GameEngine = ({ gameId, difficulty, onExit, onAutoSave, onViewLeaderboard, onHome, volume, onOpenSettings }) => {
            const [score, setScore] = useState(0);
            const [isOver, setIsOver] = useState(false);
            const [lives, setLives] = useState(3);
            const config = DIFFICULTY_CONFIG[difficulty];
            const gameData = GAMES_LIST.find(g => g.id === gameId);

            useEffect(() => { if (isOver) { onAutoSave(score); playSound('win'); } }, [isOver]);

            const handleScore = useCallback((pts) => { setScore(s => Math.max(0, s + pts)); }, []);
            
            const handleLifeLost = () => {
                playSound('break'); 
                setLives(prev => {
                    const newLives = prev - 1;
                    if(newLives <= 0) { handleEnd(); return 0; }
                    return newLives;
                });
            };
            const handleEnd = () => { setIsOver(true); };

            if (isOver) {
                return (
                    <div className="flex flex-col items-center justify-center h-full animate-float space-y-6">
                        {lives <= 0 ? <Icon name="Skull" size={80} className="text-red-500" /> : <Icon name="Trophy" size={80} className="text-yellow-400" />}
                        <h2 className="text-4xl font-bold">{lives <= 0 ? 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!' : 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©'}</h2>
                        <div className="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500">{score}</div>
                        <div className="flex flex-col w-64 gap-3">
                            <Button onClick={onViewLeaderboard} variant="success" className="w-full"><Icon name="List" size={20} /> Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</Button>
                            <Button onClick={() => onHome(score)} variant="error" className="w-full"><Icon name="LogOut" size={20} /> Ø®Ø±ÙˆØ¬</Button>
                        </div>
                    </div>
                );
            }

            const props = { diff: config, onScore: handleScore, onEnd: handleEnd, onLifeLost: handleLifeLost };

            return (
                <div className="h-full w-full max-w-2xl mx-auto p-4 flex flex-col pb-16">
                    <div className="flex justify-between items-center mb-4 bg-slate-800/80 backdrop-blur p-3 rounded-xl border border-white/10 shadow-lg relative">
                         <button onClick={onOpenSettings} className="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-colors"><Icon name="Settings" size={20} /></button>
                        <div className="flex gap-2 items-center">
                            <Button onClick={handleEnd} variant="ghost" className="px-3 py-1 text-xs h-8">Ø¥Ù†Ù‡Ø§Ø¡</Button>
                            {gameData?.hasLives && <LivesDisplay maxLives={3} currentLives={lives} />}
                        </div>
                        <div className="font-bold text-xl font-mono text-purple-300">{score} <span className="text-xs text-white/50">XP</span></div>
                    </div>
                    
                    <div className={`flex-1 bg-slate-900/50 rounded-2xl border border-white/5 relative overflow-hidden p-2 shadow-inner ${lives <= 0 ? 'animate-shake' : ''}`}>
                        {gameId === 'QUIZ' && <GameQuiz {...props} />}
                        {gameId === 'REFLEX' && <GameReflex {...props} />}
                        {gameId === 'COLOR' && <GameColor {...props} />}
                        {gameId === 'MATH' && <GameMath {...props} />}
                    </div>
                </div>
            );
        };

        const LeaderboardScreen = ({ onBack, currentName }) => {
            const [data, setData] = useState([]);
            useEffect(() => {
                const saved = localStorage.getItem('eventPlusLeaderboardAR');
                if (saved) setData(JSON.parse(saved));
            }, []);
            return (
                <div className="h-full flex flex-col p-6 relative overflow-hidden pb-16">
                     <div className="bg-game-deep"></div>
                     <div className="relative z-10 flex flex-col h-full max-w-2xl mx-auto w-full">
                        <div className="flex justify-between items-center mb-4">
                            <div className="flex flex-col">
                                <h2 className="text-3xl font-bold flex items-center gap-3"><Icon name="Trophy" className="text-yellow-400" /><span>Ù„ÙˆØ­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©</span></h2>
                                <span className="text-sm text-white/60 mt-1">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†: {data.length}</span>
                            </div>
                            <Button onClick={onBack} variant="ghost" className="p-2 rounded-full"><Icon name="X" /></Button>
                        </div>
                        <div className="flex-1 bg-slate-800/50 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden shadow-2xl relative">
                            <div className="overflow-y-auto max-h-[60vh] no-scrollbar pb-10">
                                {data.map((entry, idx) => (
                                    <div key={idx} className={`grid grid-cols-4 p-4 border-b border-white/5 items-center`}>
                                        <span className="font-bold text-yellow-400 text-center">#{idx+1}</span>
                                        <span className="col-span-2">{entry.name}</span>
                                        <span className="text-emerald-400 font-bold">{entry.score}</span>
                                    </div>
                                ))}
                            </div>
                            {data.length > 10 && (
                                <div className="absolute bottom-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4 text-center text-xs text-white/50 animate-bounce">
                                    Ø¥Ø³Ø­Ø¨ Ù„Ø£Ø³ÙÙ„ Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø²ÙŠØ¯
                                </div>
                            )}
                        </div>
                     </div>
                </div>
            );
        };

        const App = () => {
            const [screen, setScreen] = useState('START');
            const [name, setName] = useState('');
            const [diff, setDiff] = useState('MEDIUM');
            const [showKeyboard, setShowKeyboard] = useState(false);
            const [activeGame, setActiveGame] = useState(null);
            
            const [audioSettings, setAudioSettings] = useState({ musicOn: true, sfxOn: true });
            const [globalVolume, setGlobalVolume] = useState(0.5);
            const [showSettings, setShowSettings] = useState(false);

            useEffect(() => { AUDIO_SETTINGS.sfxOn = audioSettings.sfxOn; AUDIO_SETTINGS.musicOn = audioSettings.musicOn; }, [audioSettings]);

            const saveDataInternal = (finalScore) => {
                const sessionId = Date.now().toString();
                localStorage.setItem('currentSessionId', sessionId);
                const newEntry = { id: sessionId, name: name || "Ù„Ø§Ø¹Ø¨ Ù…Ø¬Ù‡ÙˆÙ„", score: finalScore, date: new Date().toISOString() };
                const saved = localStorage.getItem('eventPlusLeaderboardAR');
                let list = saved ? JSON.parse(saved) : [];
                list.push(newEntry);
                list.sort((a, b) => b.score - a.score);
                list = list.slice(0, 50);
                localStorage.setItem('eventPlusLeaderboardAR', JSON.stringify(list));
            };

            const resetGame = () => { setScreen('START'); setName(''); };

            // --- BACKGROUND MANAGER ---
            const BackgroundLayer = useMemo(() => {
                // START & DIFFICULTY = HERO ORBS (Professional)
                if (screen === 'START' || screen === 'DIFFICULTY') {
                    return (
                        <div className="bg-hero-container">
                            <div className="hero-orb orb-1"></div>
                            <div className="hero-orb orb-2"></div>
                            <div className="hero-orb orb-3"></div>
                            <div className="bg-hero-grid opacity-30"></div>
                        </div>
                    );
                }
                // MENU = METEORS (Action)
                if (screen === 'MENU') {
                    return (
                        <div className="bg-meteor-container">
                            {[...Array(30)].map((_, i) => (
                                <div key={i} className="meteor" style={{
                                    left: `${Math.random() * 120 - 20}%`, top: `${Math.random() * 50}%`,
                                    animationDuration: `${Math.random() * 2 + 1}s`, animationDelay: `${Math.random() * 2}s`
                                }}></div>
                            ))}
                        </div>
                    );
                }
                // GAME = Deep Focus
                return (
                    <>
                        <div className="bg-game-deep transition-all duration-1000"></div>
                        {[...Array(15)].map((_, i) => (
                            <div key={i} className="particle" style={{
                                left: `${Math.random()*100}%`, top: `${Math.random()*100}%`,
                                width: `${Math.random()*10+2}px`, height: `${Math.random()*10+2}px`,
                                animationDelay: `${Math.random()*5}s`, animationDuration: `${Math.random()*10+10}s`
                            }}></div>
                        ))}
                    </>
                );
            }, [screen]);

            const handleGlobalClick = () => {
                const audio = document.getElementById('bgAudio');
                if(audio && audio.paused && audioSettings.musicOn) { audio.play().catch(e=>{}); }
            };

            return (
                <div className="h-full relative overflow-hidden" onClick={handleGlobalClick}>
                    {BackgroundLayer}
                    <div className="absolute inset-0 crt-scanline"></div>

                    {screen === 'START' && (
                        <div className="fixed top-4 left-4 z-50">
                            <button onClick={() => setShowSettings(true)} className="bg-white/10 hover:bg-white/20 p-3 rounded-full border border-white/20 backdrop-blur-md transition-all"><Icon name="Settings" size={24} /></button>
                        </div>
                    )}

                    <SettingsModal isOpen={showSettings} onClose={() => setShowSettings(false)} audioSettings={audioSettings} setAudioSettings={setAudioSettings} globalVolume={globalVolume} setGlobalVolume={setGlobalVolume} />

                    <MusicPlayer isInGame={screen === 'GAME'} volume={globalVolume} enabled={audioSettings.musicOn} />

                    {screen === 'START' && (
                        <div className={`h-full flex flex-col items-center justify-center p-6 text-center space-y-8 relative pb-16 z-10`}>
                             <div className="mb-8 relative flex justify-center animate-float">
                                <div className="absolute -inset-8 bg-purple-500 rounded-full blur-2xl opacity-20 animate-pulse"></div>
                                {/* --- HERO SVG --- */}
                                <svg viewBox="0 0 200 200" className="w-56 h-56 relative z-10 drop-shadow-[0_0_35px_rgba(139,92,246,0.6)]" xmlns="http://www.w3.org/2000/svg">
                                    <defs>
                                        <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stopColor="#c084fc"></stop><stop offset="50%" stopColor="#a855f7"></stop><stop offset="100%" stopColor="#6366f1"></stop></linearGradient>
                                        <filter id="neonGlow" height="300%" width="300%" x="-75%" y="-75%"><feGaussianBlur stdDeviation="5" result="coloredBlur"></feGaussianBlur><feMerge><feMergeNode in="coloredBlur"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>
                                    </defs>
                                    <path d="M100 10 L186.6 60 V160 L100 210 L13.4 160 V60 Z" fill="none" stroke="url(#logoGrad)" strokeWidth="4" opacity="0.3" transform="scale(0.9) translate(11,11)"></path>
                                    <path d="M100 25 L165 62.5 V137.5 L100 175 L35 137.5 V62.5 Z" fill="rgba(168, 85, 247, 0.1)" stroke="url(#logoGrad)" strokeWidth="6" strokeLinejoin="round" filter="url(#neonGlow)"></path>
                                    <circle cx="130" cy="100" r="12" fill="url(#logoGrad)" opacity="0.8"></circle>
                                    <circle cx="70" cy="100" r="12" fill="url(#logoGrad)" opacity="0.8"></circle>
                                    <circle cx="100" cy="70" r="8" fill="white" opacity="0.5"></circle>
                                    <path d="M100 110 L115 135 H85 Z" fill="white" opacity="0.9" filter="url(#neonGlow)"></path>
                                    <path d="M100 25 V45 M100 175 V155 M35 100 H55 M165 100 H145" stroke="white" strokeWidth="2" opacity="0.5" strokeLinecap="round"></path>
                                </svg>
                            </div>
                            <div>
                                <h2 className="text-xl text-purple-300 tracking-[0.5em] uppercase mb-2">Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</h2>
                                <h1 className="text-6xl font-black tracking-tighter">EVENT PLUS<br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500 drop-shadow-lg">GAMES</span></h1>
                            </div>
                            
                            {/* --- UNIFIED GLASS CONTAINER --- */}
                            <div className="glass-panel w-full max-w-sm rounded-3xl p-6 flex flex-col gap-4 shadow-2xl relative z-20">
                                <div className="relative">
                                    <input 
                                        type="text" 
                                        placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù„Ù„Ù…Ù†Ø§ÙØ³Ø©" 
                                        className="w-full glass-input rounded-xl p-4 text-center text-xl font-bold focus:outline-none placeholder:text-white/20" 
                                        value={name} 
                                        readOnly 
                                        onClick={() => setShowKeyboard(true)} 
                                    />
                                    {name && <Icon name="Check" className="absolute left-4 top-1/2 -translate-y-1/2 text-green-400" size={20} />}
                                </div>
                                <Button onClick={() => name && setScreen('DIFFICULTY')} disabled={!name} className={!name ? 'opacity-50 grayscale' : 'animate-pulse'}>
                                    <span className="ml-2">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</span> <Icon name="ChevronLeft" />
                                </Button>
                                <Button variant="ghost" onClick={() => setScreen('LEADERBOARD')} className="text-sm">
                                    Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø© <Icon name="Trophy" size={16} className="mr-2" />
                                </Button>
                            </div>

                            <VirtualKeyboard isVisible={showKeyboard} onChar={(c)=>setName(n=>n.length<15?n+(c===' '?' ':c):n)} onDelete={()=>setName(n=>n.slice(0,-1))} onEnter={()=>setShowKeyboard(false)} />
                        </div>
                    )}

                    {/* --- IMPROVED DIFFICULTY SCREEN --- */}
                    {screen === 'DIFFICULTY' && (
                        <div className={`h-full flex flex-col justify-center p-6 relative pb-16 z-10 max-w-md mx-auto w-full`}>
                            <h2 className="text-3xl font-bold text-center mb-8 drop-shadow-lg flex items-center justify-center gap-2">
                                <Icon name="BarChart2" className="text-purple-400" /> Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                            </h2>
                            <div className="flex flex-col gap-4">
                                {Object.values(DIFFICULTY_CONFIG).map((d) => (
                                    <button 
                                        key={d.id} 
                                        onClick={() => { setDiff(d.id); setScreen('MENU'); playSound('click'); }} 
                                        className={`group relative overflow-hidden rounded-2xl p-6 border transition-all duration-300 transform hover:scale-[1.02] hover:shadow-2xl text-right bg-white/5 backdrop-blur-md ${d.border} ${d.glow}`}
                                    >
                                        <div className={`absolute inset-0 bg-gradient-to-r ${d.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`}></div>
                                        <div className="relative z-10 flex justify-between items-center">
                                            <div>
                                                <h3 className={`text-3xl font-black italic mb-1 ${d.color}`}>{d.label}</h3>
                                                <p className="text-xs text-white/50 font-medium tracking-wide">{d.subLabel}</p>
                                            </div>
                                            <div className={`p-3 rounded-xl bg-white/5 border border-white/10 group-hover:bg-white/10 transition-colors ${d.color}`}>
                                                <Icon name={d.icon} size={32} />
                                            </div>
                                        </div>
                                        <div className="mt-4 flex gap-2">
                                            <span className="text-[10px] bg-black/40 px-2 py-1 rounded border border-white/5 text-white/70">Ø³Ø±Ø¹Ø© {Math.floor(d.speedFactor*100)}%</span>
                                            <span className="text-[10px] bg-black/40 px-2 py-1 rounded border border-white/5 text-white/70">Ù†Ù‚Ø§Ø· x{d.multiplier}</span>
                                        </div>
                                    </button>
                                ))}
                            </div>
                            <Button variant="ghost" className="mt-8 mx-auto w-12 h-12 rounded-full border border-white/10" onClick={() => setScreen('START')}><Icon name="ArrowRight" /></Button>
                        </div>
                    )}

                    {/* --- NEW PROFESSIONAL MENU SCREEN --- */}
                    {screen === 'MENU' && (
                        <div className="h-full flex flex-col p-6 pb-20 z-10 w-full max-w-4xl mx-auto">
                            {/* Header Section */}
                            <div className="flex flex-col items-center mb-8 animate-slideDown">
                                <div className="bg-white/5 border border-white/10 px-6 py-2 rounded-full backdrop-blur-md mb-4 flex items-center gap-2 shadow-lg">
                                    <span className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                                    <span className="text-sm text-white/60">Ø§Ù„Ù„Ø§Ø¹Ø¨:</span>
                                    <span className="text-lg font-bold text-purple-400">{name}</span>
                                </div>
                                <h2 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-white/60 drop-shadow-sm">
                                    Ø§Ø®ØªØ± Ù„Ø¹Ø¨ØªÙƒ
                                </h2>
                            </div>

                            {/* Games Grid - Adjusted Spacing (Gap-8) */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 w-full flex-1 content-center overflow-y-auto no-scrollbar pb-10">
                                {GAMES_LIST.map((g, i) => (
                                    <button
                                        key={g.id}
                                        onClick={() => { setActiveGame(g.id); setScreen('GAME'); playSound('click'); }}
                                        className={`group relative overflow-hidden rounded-3xl p-1 border border-white/10 transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(168,85,247,0.15)] h-auto min-h-[120px] md:min-h-[160px] flex-1`}
                                        style={{animationDelay: `${i * 100}ms`}}
                                    >
                                        {/* Card Interior */}
                                        <div className="absolute inset-0 bg-[#1a103c] rounded-[22px] z-0"></div>
                                        <div className={`absolute inset-0 bg-gradient-to-br ${g.color} opacity-0 group-hover:opacity-20 transition-opacity duration-500 z-0`}></div>

                                        {/* Added gap-8 for clear spacing */}
                                        <div className="relative z-10 flex items-center justify-start p-6 h-full bg-white/5 rounded-[22px] backdrop-blur-sm overflow-hidden gap-8">
                                            {/* Decorative Circle Background */}
                                            <div className={`absolute -right-6 -bottom-6 w-32 h-32 rounded-full bg-gradient-to-br ${g.color} opacity-20 blur-xl group-hover:opacity-40 transition-all`}></div>

                                            {/* Icon */}
                                            <div className={`w-20 h-20 rounded-2xl flex items-center justify-center bg-gradient-to-br ${g.color} shadow-lg group-hover:scale-110 transition-transform duration-300 shrink-0`}>
                                                <Icon name={g.icon} size={40} className="text-white" />
                                            </div>

                                            {/* Text Info */}
                                            <div className="flex flex-col items-start text-right flex-1">
                                                <h3 className="text-2xl md:text-3xl font-bold text-white mb-2 group-hover:text-purple-200 transition-colors">{g.name}</h3>
                                                <p className="text-sm md:text-base text-white/50 font-medium leading-tight">{g.desc}</p>
                                            </div>

                                            {/* Arrow Indicator */}
                                            <div className="absolute top-1/2 left-6 -translate-y-1/2 opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300">
                                                <Icon name="ChevronLeft" size={24} className="text-white/50" />
                                            </div>
                                        </div>
                                    </button>
                                ))}
                            </div>
                            
                             <div className="mt-auto flex justify-center pt-4">
                                 <Button variant="ghost" onClick={() => setScreen('DIFFICULTY')} className="text-sm opacity-50 hover:opacity-100">
                                     <Icon name="ArrowRight" size={16} className="ml-2" /> ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                                 </Button>
                            </div>
                        </div>
                    )}

                    {screen === 'GAME' && (
                        <div className={`h-full z-10 relative`}>
                            <GameEngine gameId={activeGame} difficulty={diff} onExit={() => setScreen('MENU')} onAutoSave={saveDataInternal} onViewLeaderboard={() => setScreen('LEADERBOARD')} onHome={resetGame} volume={globalVolume} onOpenSettings={() => setShowSettings(true)} />
                        </div>
                    )}

                    {screen === 'LEADERBOARD' && <LeaderboardScreen onBack={resetGame} currentName={name} />}
                    
                    <CopyrightBadge />
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
		
		
		let tapCount = 0;       // Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø±Ø§Øª
  let tapTimer = null;    // Ù…Ø¤Ù‚Øª Ø§Ù„ØªØµÙÙŠØ±

  document.addEventListener('click', function() {
    tapCount++; // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¥Ø°Ø§ ØªÙˆÙ‚Ù Ø§Ù„Ù†Ù‚Ø± Ù„Ø£ÙƒØ«Ø± Ù…Ù† 400 Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø«Ø§Ù†ÙŠØ©
    if (tapTimer) clearTimeout(tapTimer);
    tapTimer = setTimeout(() => {
      tapCount = 0;
    }, 400); 

    // Ø§Ù„Ø´Ø±Ø·: 5 Ø¶ØºØ·Ø§Øª ÙÙ‚Ø·
    if (tapCount === 5) {
      // Ù†ØªØ­Ù‚Ù‚ Ø£ÙˆÙ„Ø§Ù‹: Ù‡Ù„ Ù†Ø­Ù† Ø®Ø§Ø±Ø¬ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©ØŸ Ø¥Ø°Ø§ Ù†Ø¹Ù…ØŒ Ù†Ø¯Ø®Ù„ Ø§Ù„ÙˆØ¶Ø¹.
      if (!document.fullscreenElement && !document.webkitFullscreenElement) {
        enterFullScreen();
      }
      
      // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙƒÙˆØ¯ Ù‡Ù†Ø§ Ù„Ù„Ø®Ø±ÙˆØ¬ (Exit)ØŒ ØªÙ… Ø­Ø°ÙÙ‡ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø·Ù„Ø¨Ùƒ
      tapCount = 0; // ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯
    }
  });

  // Ø¯Ø§Ù„Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ (ÙÙ‚Ø·)
  function enterFullScreen() {
    let elem = document.documentElement;
    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) { /* Ù…Ù‡Ù… Ù„Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ùˆ ÙƒØ±ÙˆÙ… */
      elem.webkitRequestFullscreen();
    } else if (elem.msRequestFullscreen) {
      elem.msRequestFullscreen();
    }
  }
    </script>
</body>
</html>
